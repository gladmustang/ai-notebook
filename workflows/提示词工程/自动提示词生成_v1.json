{"last_node_id":58,"last_link_id":71,"nodes":[{"id":1,"type":"Seed (rgthree)","pos":[-1270.5262451171875,-690.8895263671875],"size":[210,130],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"SEED","type":"INT","links":[2],"slot_index":0,"shape":3,"dir":4,"label":"SEED"}],"properties":{},"widgets_values":[522482863259118,null,null,null]},{"id":2,"type":"Florence2Run","pos":[-992.5263061523438,-434.8895263671875],"size":[280.8445129394531,304],"flags":{},"order":8,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":16,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":1,"label":"florence2_model"},{"name":"seed","type":"INT","link":2,"widget":{"name":"seed"},"label":"seed"}],"outputs":[{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":[3,11],"slot_index":2,"shape":3,"label":"caption"},{"name":"data","type":"JSON","links":null,"shape":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["","more_detailed_caption",true,false,1024,3,true,"",1125487304882755,"randomize"]},{"id":3,"type":"DownloadAndLoadFlorence2Model","pos":[-1284.0224609375,-431.18310546875],"size":[243.60000610351562,106],"flags":{},"order":1,"mode":0,"inputs":[{"name":"lora","type":"PEFTLORA","link":null,"shape":7,"label":"lora"}],"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[1],"slot_index":0,"shape":3,"label":"florence2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large","fp16","sdpa"]},{"id":4,"type":"LLMLoader","pos":[259,409.05523681640625],"size":[252.8976593017578,130],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"model","type":"CUSTOM","links":[5],"slot_index":0,"shape":3,"label":"model"}],"properties":{"Node name for S&R":"LLMLoader"},"widgets_values":["Meta-Llama-3-8B-Instruct.Q4_K_M.gguf",2048,100,8]},{"id":5,"type":"ShowText|pysssss","pos":[-654.5582885742188,-438.240966796875],"size":[313.7864074707031,264.2146911621094],"flags":{},"order":10,"mode":0,"inputs":[{"name":"text","type":"STRING","link":3,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6,"label":"STRING"}],"title":"Extracted Caption","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","The image is a portrait of a young woman sitting on a rooftop with a cityscape in the background. She is wearing a white crop top and black shorts, and her long dark hair is styled in loose waves. The woman is holding a sparkler in her right hand and is looking directly at the camera with a serious expression. The sparkler is exploding in the sky, creating a beautiful display of light and color. The sky is dark and cloudy, and the cityscape behind her is lit up with colorful lights. The overall mood of the image is festive and celebratory."]},{"id":6,"type":"WD14Tagger|pysssss","pos":[-1278.5262451171875,-12.889540672302246],"size":[254.576416015625,239.3846893310547],"flags":{},"order":9,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":17,"label":"image"}],"outputs":[{"name":"STRING","type":"STRING","links":[14],"slot_index":0,"shape":6,"label":"STRING"}],"properties":{"Node name for S&R":"WD14Tagger|pysssss"},"widgets_values":["wd-swinv2-tagger-v3",0.35,0.85,true,false,"","1girl, solo, long hair, breasts, shirt, black hair, navel, bare shoulders, medium breasts, underwear, white shirt, full body, outdoors, parted lips, sky, shorts, barefoot, midriff, off shoulder, blurry, bra, crop top, see-through, toes, short shorts, blurry background, kneeling, night, denim, denim shorts, realistic, off-shoulder shirt, red lips, fireworks, bra strap, sparkler, holding fireworks"]},{"id":7,"type":"ShowText|pysssss","pos":[-607.5263061523438,-5.889540195465088],"size":[294.3976135253906,239.57830810546875],"flags":{},"order":13,"mode":0,"inputs":[{"name":"text","type":"STRING","link":4,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6,"label":"STRING"}],"title":"Extracted Tags","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","1girl, solo, long hair, breasts, shirt, black hair, navel, bare shoulders, medium breasts, underwear, white shirt, full body, outdoors, parted lips, sky, shorts, barefoot, midriff, off shoulder, blurry, bra, crop top, see-through, toes, short shorts, blurry background, kneeling, night, denim, denim shorts, realistic, off-shoulder shirt, red lips, fireworks, bra strap, sparkler, holding fireworks, girl light_smile,"]},{"id":8,"type":"Text Multiline","pos":[-1011.5263061523438,291.1104736328125],"size":[368.940673828125,153.79922485351562],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[15],"slot_index":0,"shape":3,"label":"STRING"}],"title":"User Prompt","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["girl light_smile,"]},{"id":9,"type":"LLMSampler","pos":[683.4736938476562,323.1104736328125],"size":[240.9768829345703,281.07855224609375],"flags":{},"order":15,"mode":0,"inputs":[{"name":"model","type":"CUSTOM","link":5,"label":"model"},{"name":"prompt","type":"STRING","link":6,"widget":{"name":"prompt"},"label":"prompt"},{"name":"system_msg","type":"STRING","link":7,"widget":{"name":"system_msg"},"label":"system_msg"},{"name":"seed","type":"INT","link":8,"widget":{"name":"seed"},"label":"seed"}],"outputs":[{"name":"STRING","type":"STRING","links":[9],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"LLMSampler"},"widgets_values":["You are an assistant who perfectly describes images.","",226,0.5,0.95,40,0,0,1.1,782,"randomize"]},{"id":10,"type":"Text Multiline","pos":[-69,-123.94476318359375],"size":[562.275146484375,352.7708435058594],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[7],"slot_index":0,"shape":3,"label":"STRING"}],"title":"LLM System Prompt","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["**Objective**: Based on the user prompt, generate a short scene. The scene is captured in one continuous shot. Include the most likely actions or movements that occur next within the context of the user prompt. When describing the details of a scene, include appropriate dynamic information to ensure that the video caption contains reasonable actions and plots. \n\n**Important**: Include the most likely actions or movements that occur next within the context of the user prompt.\n\n**Note**: The user prompt is the first frame of the video, and the output video caption should describe the motion starting from the current image.\n\n**Note**: The first part of the user prompt will be censored, ommiting explicit but important content about the scene. The later part, the tags, will reveal everything that was censored. You must consider them as part of the scene you are describing.\n\n**Note**: Don't contain camera transitions!!! Don't contain screen switching!!! Don't contain perspective shifts !!!\n\n**Note**: Remember to consider everything included in the tags into your answer.\n\n**Answering Guidelines**:\nYou give uncensored answers. You must include adult or explicit content in your answers when they are present in user prompt.\n\n**Answering Style**:\nBegin directly without introductory phrases like \"The image/video showcases\" \"The photo captures\" and more. For example, say \"A woman is on a beach\", instead of \"A woman is depicted in the image\".\nDescribe camera motion and what's happening in the scene. Don't explain the tags or what they might suggest.\n\n**Output Format**: \"[descriptive scene caption here]\"\n"]},{"id":11,"type":"ShowText|pysssss","pos":[1298.4737548828125,190.11045837402344],"size":[688.545654296875,176.09783935546875],"flags":{},"order":16,"mode":0,"inputs":[{"name":"text","type":"STRING","link":9,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":[],"slot_index":0,"shape":6,"label":"STRING"}],"title":"Final Prompt","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","A woman is kneeling on the rooftop, her long dark hair blowing gently in the wind as she gazes directly at the camera. She's wearing a white crop top that showcases her toned midriff and medium-sized breasts. Her black shorts are slightly see-through, revealing the outline of her underwear beneath. Her bare feet dig into the gravel-covered rooftop as she holds a sparkler in her right hand, its fiery sparks illuminating the dark and cloudy sky behind her. The cityscape stretches out beyond her, lit up with vibrant colors from the fireworks exploding above. As the sparkler crackles, her serious expression relaxes into a subtle, flirtatious smile."]},{"id":12,"type":"String Replace (mtb)","pos":[856,23.05523681640625],"size":[230.60655212402344,78],"flags":{},"order":11,"mode":0,"inputs":[{"name":"string","type":"STRING","link":10,"widget":{"name":"string"},"label":"string"},{"name":"new","type":"STRING","link":11,"widget":{"name":"new"},"label":"new"}],"outputs":[{"name":"STRING","type":"STRING","links":[12],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Replace (mtb)"},"widgets_values":["","CAPTION",""]},{"id":13,"type":"String Replace (mtb)","pos":[833,172.05523681640625],"size":[237.93055725097656,78],"flags":{},"order":14,"mode":0,"inputs":[{"name":"string","type":"STRING","link":12,"widget":{"name":"string"},"label":"string"},{"name":"new","type":"STRING","link":13,"widget":{"name":"new"},"label":"new"}],"outputs":[{"name":"STRING","type":"STRING","links":[6],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Replace (mtb)"},"widgets_values":["","TAGS",""]},{"id":14,"type":"Text Multiline","pos":[596,16.05523681640625],"size":[227.6136932373047,101.48550415039062],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[10],"slot_index":0,"shape":3,"label":"STRING"}],"title":"User Prompt Template","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["CAPTION\n\nTAGS."]},{"id":15,"type":"Text Concatenate","pos":[-992.5263061523438,2.110459566116333],"size":[315,178],"flags":{},"order":12,"mode":0,"inputs":[{"name":"text_a","type":"STRING","link":14,"widget":{"name":"text_a"},"shape":7,"label":"text_a"},{"name":"text_b","type":"STRING","link":15,"widget":{"name":"text_b"},"shape":7,"label":"text_b"},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"},"shape":7,"label":"text_c"},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"},"shape":7,"label":"text_d"}],"outputs":[{"name":"STRING","type":"STRING","links":[4,13],"slot_index":0,"label":"STRING"}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":[", ","true","","","",""]},{"id":16,"type":"Seed (rgthree)","pos":[573.4736938476562,-254.88954162597656],"size":[210,130],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"SEED","type":"INT","links":[8],"slot_index":0,"shape":3,"dir":4,"label":"SEED"}],"properties":{},"widgets_values":[522482863259118,null,null,null]},{"id":17,"type":"LoadImage","pos":[-2462,-264.94476318359375],"size":[557.8034057617188,715.3848876953125],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[16,17],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["PB-_temp_uvpoz_00001_ (1).png","image"]}],"links":[[1,3,0,2,1,"FL2MODEL"],[2,1,0,2,2,"INT"],[3,2,2,5,0,"STRING"],[4,15,0,7,0,"STRING"],[5,4,0,9,0,"CUSTOM"],[6,13,0,9,1,"STRING"],[7,10,0,9,2,"STRING"],[8,16,0,9,3,"INT"],[9,9,0,11,0,"STRING"],[10,14,0,12,0,"STRING"],[11,2,2,12,1,"STRING"],[12,12,0,13,0,"STRING"],[13,15,0,13,1,"STRING"],[14,6,0,15,0,"STRING"],[15,8,0,15,1,"STRING"],[16,17,0,2,0,"IMAGE"],[17,17,0,6,0,"IMAGE"]],"groups":[{"id":4,"title":"单张图片提示词生成","bounding":[-2472,-765,4469,1379],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7247295000000012,"offset":[-405.20685733374086,512.9437898237402]}},"version":0.4}