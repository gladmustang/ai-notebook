{"last_node_id":66,"last_link_id":206,"nodes":[{"id":40,"type":"Reroute","pos":[-390,770],"size":[75,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":148,"label":""}],"outputs":[{"name":"VAE","type":"VAE","links":[150,159,163],"slot_index":0,"label":"VAE"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":5,"type":"CLIPTextEncode","pos":[-20,700],"size":[400,200],"flags":{},"order":6,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[158],"slot_index":0,"shape":3,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["bad quality"],"color":"#223","bgcolor":"#335"},{"id":43,"type":"RemapMaskRange","pos":[-10,950],"size":[210,82],"flags":{},"order":18,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":154,"label":"mask"}],"outputs":[{"name":"mask","type":"MASK","links":[155],"slot_index":0,"shape":3,"label":"mask"}],"properties":{"Node name for S&R":"RemapMaskRange"},"widgets_values":[0.08,0.6],"color":"#223","bgcolor":"#335"},{"id":45,"type":"VAEEncode","pos":[208,953],"size":[140,50],"flags":{},"order":13,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":164,"slot_index":0,"label":"pixels"},{"name":"vae","type":"VAE","link":163,"slot_index":1,"label":"vae"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[160],"shape":3,"label":"LATENT"}],"properties":{"Node name for S&R":"VAEEncode"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":44,"type":"ICLightConditioning","pos":[388,703],"size":[259.267333984375,138],"flags":{},"order":16,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":157,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":158,"label":"negative"},{"name":"vae","type":"VAE","link":159,"label":"vae"},{"name":"foreground","type":"LATENT","link":160,"slot_index":3,"label":"foreground"},{"name":"opt_background","type":"LATENT","link":null,"label":"opt_background","shape":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[161],"slot_index":0,"shape":3,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[162],"slot_index":1,"shape":3,"label":"negative"},{"name":"empty_latent","type":"LATENT","links":null,"shape":3,"label":"empty_latent"}],"properties":{"Node name for S&R":"ICLightConditioning"},"widgets_values":[0.219],"color":"#223","bgcolor":"#335"},{"id":42,"type":"GrowMaskWithBlur","pos":[-243,945],"size":[210,250],"flags":{},"order":17,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":152,"label":"mask"}],"outputs":[{"name":"mask","type":"MASK","links":[154],"slot_index":0,"shape":3,"label":"mask"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"mask_inverted"}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[0,0,true,false,100,0.8,0.9,false],"color":"#223","bgcolor":"#335"},{"id":20,"type":"VAEEncode","pos":[211,1124],"size":[140,50],"flags":{},"order":20,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":168,"slot_index":0,"label":"pixels"},{"name":"vae","type":"VAE","link":150,"slot_index":1,"label":"vae"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[123],"slot_index":0,"shape":3,"label":"LATENT"}],"properties":{"Node name for S&R":"VAEEncode"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":35,"type":"MaskToImage","pos":[-8,1067],"size":[206.1973419189453,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":155,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[168,169],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":41,"type":"PreviewImage","pos":[-7,1126],"size":[205.6858367919922,246],"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":169,"slot_index":0,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":37,"type":"LoadAndApplyICLightUnet","pos":[-716,843],"size":[266.8051452636719,58],"flags":{},"order":4,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":156,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[137],"slot_index":0,"shape":3,"label":"MODEL"}],"properties":{"Node name for S&R":"LoadAndApplyICLightUnet"},"widgets_values":["IC-Light\\iclight_sd15_fc.safetensors"],"color":"#223","bgcolor":"#335"},{"id":39,"type":"ImageResize+","pos":[-849.2262573242188,962.4212646484375],"size":[210,220],"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":206,"label":"image"},{"name":"width","type":"INT","link":176,"widget":{"name":"width"}},{"name":"height","type":"INT","link":177,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[164],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"width","type":"INT","links":[146],"shape":3,"label":"width"},{"name":"height","type":"INT","links":[147],"slot_index":2,"shape":3,"label":"height"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[512,768,"lanczos","keep proportion","downscale if bigger",0],"color":"#223","bgcolor":"#335"},{"id":22,"type":"CreateShapeMask","pos":[-477,947],"size":[220,222],"flags":{},"order":14,"mode":0,"inputs":[{"name":"frame_width","type":"INT","link":146,"slot_index":0,"widget":{"name":"frame_width"},"label":"frame_width"},{"name":"frame_height","type":"INT","link":147,"widget":{"name":"frame_height"},"label":"frame_height"}],"outputs":[{"name":"mask","type":"MASK","links":[152],"slot_index":0,"shape":3,"label":"mask"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"mask_inverted"}],"properties":{"Node name for S&R":"CreateShapeMask"},"widgets_values":["circle",1,680,256,0,512,512,1200,1200],"color":"#223","bgcolor":"#335"},{"id":7,"type":"VAEDecode","pos":[209,1039],"size":[140,50],"flags":{},"order":23,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":77,"label":"samples"},{"name":"vae","type":"VAE","link":10,"slot_index":1,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[174,184],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":60,"type":"PreviewImage","pos":[1296.919677734375,1280.084716796875],"size":[210,246],"flags":{},"order":29,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":192,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":54,"type":"Get resolution [Crystools]","pos":[-1257.8631591796875,1065.513916015625],"size":[214.20001220703125,96],"flags":{},"order":8,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":178,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":[176],"label":"width","slot_index":0},{"name":"height","type":"INT","links":[177],"label":"height","slot_index":1}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":59,"type":"ImageColorTransfer","pos":[821.693115234375,1303.5223388671875],"size":[315,78],"flags":{},"order":26,"mode":2,"inputs":[{"name":"source","type":"IMAGE","link":193,"label":"source"},{"name":"target","type":"IMAGE","link":194,"label":"target"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[192],"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImageColorTransfer"},"widgets_values":[0.5]},{"id":51,"type":"SaveImage","pos":[-394.6465759277344,1282.299560546875],"size":[330.8738708496094,438.8177490234375],"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":174,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"],"color":"#223","bgcolor":"#335"},{"id":63,"type":"Note","pos":[-64.82173156738281,1806.1912841796875],"size":[496.3944091796875,180.96168518066406],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["detail transfer: \nsource, 未修改得原图\ntarget: 打光后的图\n\n\nmode: add, blur_sigma: 3, blend_factor: 0.8， blur_sigma值越高，和原图越接近\nmode: soft, blur_sigma: 0, blend_factor: 0.55，blend_factor值越高，和原图色调越接近"],"color":"#432","bgcolor":"#653"},{"id":55,"type":"DetailTransfer","pos":[10.432646751403809,1445.5205078125],"size":[315,146],"flags":{},"order":25,"mode":0,"inputs":[{"name":"target","type":"IMAGE","link":184,"label":"target"},{"name":"source","type":"IMAGE","link":199,"label":"source"},{"name":"mask","type":"MASK","link":205,"shape":7,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[193,195,197],"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"DetailTransfer"},"widgets_values":["soft_light",0.1,0.55]},{"id":52,"type":"Note","pos":[-1283.96728515625,1818.6927490234375],"size":[210,58],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["起点加载图像"],"color":"#223","bgcolor":"#335"},{"id":58,"type":"PreviewMask_","pos":[-993.559326171875,1708.7684326171875],"size":[210,246],"flags":{},"order":11,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":188,"label":"mask"}],"outputs":[],"properties":{"Node name for S&R":"PreviewMask_"}},{"id":66,"type":"PreviewMask_","pos":[-712.2662353515625,1718.09814453125],"size":[210,246],"flags":{},"order":15,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":202,"label":"mask"}],"outputs":[],"properties":{"Node name for S&R":"PreviewMask_"}},{"id":2,"type":"CheckpointLoaderSimple","pos":[-713,703],"size":[262.40972900390625,98],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[156],"slot_index":0,"shape":3,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[4,5],"slot_index":1,"shape":3,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[10,148],"slot_index":2,"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["realistic\\繁花_写真-10_繁花-10.safetensors"],"color":"#232","bgcolor":"#353"},{"id":4,"type":"CLIPTextEncode","pos":[-430,700],"size":[400,200],"flags":{},"order":5,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":4,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[157],"slot_index":0,"shape":3,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["in a gym, gym setting, sunrise in the morning"],"color":"#232","bgcolor":"#353"},{"id":57,"type":"RembgNode_Mix","pos":[-1237.6492919921875,1327.56591796875],"size":[327.5999755859375,98],"flags":{},"order":9,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":186,"label":"image"}],"outputs":[{"name":"masks","type":"MASK","links":[188,201],"shape":6,"label":"masks","slot_index":0},{"name":"images","type":"IMAGE","links":[],"shape":6,"label":"images","slot_index":1},{"name":"RGBAs","type":"RGBA","links":null,"shape":6,"label":"RGBAs"}],"properties":{"Node name for S&R":"RembgNode_Mix"},"widgets_values":["briarmbg"]},{"id":9,"type":"LoadImage","pos":[-1639.2325439453125,1256.36572265625],"size":[332.6209716796875,441.0178527832031],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[178,186,194,196,199,206],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":[],"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_nklvp_00008_.png","image"],"color":"#232","bgcolor":"#353"},{"id":65,"type":"MaskBlur+","pos":[-912.6640014648438,1485.7105712890625],"size":[315,82],"flags":{},"order":12,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":201,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[202,205],"label":"MASK","slot_index":0}],"properties":{"Node name for S&R":"MaskBlur+"},"widgets_values":[20,"auto"]},{"id":19,"type":"KSampler","pos":[385,881],"size":[260,262],"flags":{},"order":22,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":137,"slot_index":0,"label":"model"},{"name":"positive","type":"CONDITIONING","link":161,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":162,"slot_index":2,"label":"negative"},{"name":"latent_image","type":"LATENT","link":123,"label":"latent_image"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[77],"slot_index":0,"shape":3,"label":"LATENT"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[775607119785255,"fixed",30,2.05,"dpmpp_2m","karras",0.9],"color":"#223","bgcolor":"#335"},{"id":56,"type":"PreviewImage","pos":[370.0837097167969,1304.8861083984375],"size":[348.2244567871094,419.64434814453125],"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":195,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":61,"type":"ColorMatch","pos":[826.977783203125,1577.7628173828125],"size":[315,102],"flags":{},"order":28,"mode":0,"inputs":[{"name":"image_ref","type":"IMAGE","link":196,"label":"image_ref"},{"name":"image_target","type":"IMAGE","link":197,"label":"image_target"}],"outputs":[{"name":"image","type":"IMAGE","links":[198],"label":"image","slot_index":0}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl",0.5]},{"id":62,"type":"PreviewImage","pos":[1244.8883056640625,1587.5189208984375],"size":[324.92816162109375,395.1262512207031],"flags":{},"order":30,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":198,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}}],"links":[[4,2,1,4,0,"CLIP"],[5,2,1,5,0,"CLIP"],[10,2,2,7,1,"VAE"],[77,19,0,7,0,"LATENT"],[123,20,0,19,3,"LATENT"],[137,37,0,19,0,"MODEL"],[146,39,1,22,0,"INT"],[147,39,2,22,1,"INT"],[148,2,2,40,0,"*"],[150,40,0,20,1,"VAE"],[152,22,0,42,0,"MASK"],[154,42,0,43,0,"MASK"],[155,43,0,35,0,"MASK"],[156,2,0,37,0,"MODEL"],[157,4,0,44,0,"CONDITIONING"],[158,5,0,44,1,"CONDITIONING"],[159,40,0,44,2,"VAE"],[160,45,0,44,3,"LATENT"],[161,44,0,19,1,"CONDITIONING"],[162,44,1,19,2,"CONDITIONING"],[163,40,0,45,1,"VAE"],[164,39,0,45,0,"IMAGE"],[168,35,0,20,0,"IMAGE"],[169,35,0,41,0,"IMAGE"],[174,7,0,51,0,"IMAGE"],[176,54,0,39,1,"INT"],[177,54,1,39,2,"INT"],[178,9,0,54,0,"IMAGE"],[184,7,0,55,0,"IMAGE"],[186,9,0,57,0,"IMAGE"],[188,57,0,58,0,"MASK"],[192,59,0,60,0,"IMAGE"],[193,55,0,59,0,"IMAGE"],[194,9,0,59,1,"IMAGE"],[195,55,0,56,0,"IMAGE"],[196,9,0,61,0,"IMAGE"],[197,55,0,61,1,"IMAGE"],[198,61,0,62,0,"IMAGE"],[199,9,0,55,1,"IMAGE"],[201,57,0,65,0,"MASK"],[202,65,0,66,0,"MASK"],[205,65,0,55,2,"MASK"],[206,9,0,39,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.6934334949441388,"offset":[1293.1218240445487,-784.8139963882904]},"0246.VERSION":[0,0,4]},"version":0.4}