{"last_node_id":203,"last_link_id":492,"nodes":[{"id":1,"type":"DownloadAndLoadLivePortraitModels","pos":[-2615.92529296875,-528.4102172851562],"size":[302.43463134765625,82],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"live_portrait_pipe","type":"LIVEPORTRAITPIPE","links":[446,448,466],"slot_index":0,"shape":3,"label":"live_portrait_pipe"}],"properties":{"Node name for S&R":"DownloadAndLoadLivePortraitModels"},"widgets_values":["auto","human"]},{"id":8,"type":"VHS_LoadVideo","pos":[-1909,158],"size":[340.1555480957031,262],"flags":{},"order":10,"mode":0,"inputs":[{"name":"meta_batch","type":"VHS_BatchManager","link":null,"shape":7,"label":"meta_batch"},{"name":"vae","type":"VAE","link":null,"shape":7,"label":"vae"},{"name":"frame_load_cap","type":"INT","link":302,"widget":{"name":"frame_load_cap"},"label":"frame_load_cap"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[485],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"frame_count","type":"INT","links":null,"shape":3,"label":"frame_count"},{"name":"audio","type":"AUDIO","links":[480],"slot_index":2,"shape":3,"label":"audio"},{"name":"video_info","type":"VHS_VIDEOINFO","links":[481],"slot_index":3,"shape":3,"label":"video_info"}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"ÈÖçÈü≥ (2).mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":400,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":400,"skip_first_frames":0,"force_rate":0,"filename":"ÈÖçÈü≥ (2).mp4","type":"input","format":"video/mp4","select_every_nth":1}}}},{"id":78,"type":"GetImageSizeAndCount","pos":[-803.1104736328125,-806.8090209960938],"size":[210,86],"flags":{},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":434,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[445,455],"slot_index":0,"shape":3,"label":"image"},{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":81,"type":"GrowMaskWithBlur","pos":[1290,-798],"size":[315,246],"flags":{},"order":9,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":192,"slot_index":0,"label":"mask"}],"outputs":[{"name":"mask","type":"MASK","links":[187,471],"slot_index":0,"shape":3,"label":"mask"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"mask_inverted"}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[0,0,true,false,13.9,1,1,false]},{"id":82,"type":"MaskPreview+","pos":[1662,-803],"size":[210,246],"flags":{},"order":12,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":187,"label":"mask"}],"outputs":[],"properties":{"Node name for S&R":"MaskPreview+"},"widgets_values":[]},{"id":83,"type":"CreateShapeMask","pos":[915,-791],"size":[315,270],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"mask","type":"MASK","links":[192],"slot_index":0,"shape":3,"label":"mask"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"mask_inverted"}],"properties":{"Node name for S&R":"CreateShapeMask"},"widgets_values":["circle",1,256,256,0,512,512,472,472]},{"id":129,"type":"LivePortraitLoadCropper","pos":[-2615.92529296875,-188.4115447998047],"size":[315,106],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"cropper","type":"LPCROPPER","links":[478],"slot_index":0,"shape":3,"label":"cropper"}],"properties":{"Node name for S&R":"LivePortraitLoadCropper"},"widgets_values":["CUDA",true,0.5]},{"id":133,"type":"PrimitiveNode","pos":[-2586,-8],"size":[210,82],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[302,324],"slot_index":0,"widget":{"name":"frame_load_cap"},"label":"INT"}],"title":"frame_load_cap","properties":{"Run widget replace on values":false},"widgets_values":[400,"fixed"]},{"id":134,"type":"GetImageSizeAndCount","pos":[-575.6168823242188,300.7777404785156],"size":[210,86],"flags":{},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":470,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[479],"slot_index":0,"shape":3,"label":"image"},{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":146,"type":"VHS_LoadVideo","pos":[-1900.110595703125,-897.8090209960938],"size":[340.1555480957031,262],"flags":{},"order":11,"mode":0,"inputs":[{"name":"meta_batch","type":"VHS_BatchManager","link":null,"shape":7,"label":"meta_batch"},{"name":"vae","type":"VAE","link":null,"shape":7,"label":"vae"},{"name":"frame_load_cap","type":"INT","link":324,"slot_index":2,"widget":{"name":"frame_load_cap"},"label":"frame_load_cap"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[491],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"frame_count","type":"INT","links":null,"shape":3,"label":"frame_count"},{"name":"audio","type":"AUDIO","links":[],"slot_index":2,"shape":3,"label":"audio"},{"name":"video_info","type":"VHS_VIDEOINFO","links":[489],"slot_index":3,"shape":3,"label":"video_info"}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"11Êúà8Êó• (2)(1).mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":400,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":400,"skip_first_frames":0,"force_rate":0,"filename":"11Êúà8Êó• (2)(1).mp4","type":"input","format":"video/mp4","select_every_nth":1}}}},{"id":165,"type":"ImageResizeKJ","pos":[-1200.110595703125,-907.8090209960938],"size":[315,242],"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":491,"label":"image"},{"name":"get_image_size","type":"IMAGE","link":null,"shape":7,"label":"get_image_size"},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"label":"width_input"},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"label":"height_input"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[434],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[1024,1024,"bilinear",true,2,0,0,"disabled"]},{"id":168,"type":"VHS_VideoCombine","pos":[1123,-232],"size":[678.6611938476562,310],"flags":{},"order":28,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":469,"label":"images"},{"name":"audio","type":"AUDIO","link":462,"shape":7,"label":"audio"},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"shape":7,"label":"meta_batch"},{"name":"vae","type":"VAE","link":null,"shape":7,"label":"vae"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"Filenames"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"LivePortrait","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"LivePortrait_00010-audio.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":24}}}},{"id":180,"type":"LivePortraitRetargeting","pos":[-599.6167602539062,56.777774810791016],"size":[430.8000183105469,130],"flags":{},"order":22,"mode":0,"inputs":[{"name":"driving_crop_info","type":"CROPINFO","link":467,"slot_index":0,"label":"driving_crop_info"}],"outputs":[{"name":"retargeting_info","type":"RETARGETINGINFO","links":[492],"slot_index":0,"shape":3,"label":"retargeting_info"}],"properties":{"Node name for S&R":"LivePortraitRetargeting"},"widgets_values":[true,1,true,0.5]},{"id":181,"type":"GetImageSizeAndCount","pos":[1469,-430],"size":[210,86],"flags":{},"order":27,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":458,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[469,482],"slot_index":0,"shape":3,"label":"image"},{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":182,"type":"GetImageSizeAndCount","pos":[-1440.617431640625,194.77777099609375],"size":[210,86],"flags":{},"order":13,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":485,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[465],"slot_index":0,"shape":3,"label":"image"},{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":187,"type":"Note","pos":[-593.6167602539062,-60.222232818603516],"size":[210,58],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Connect this if you want to use the eye/lip retargeting mode"],"color":"#432","bgcolor":"#653"},{"id":188,"type":"Note","pos":[-321.61724853515625,275.77777099609375],"size":[229.1644287109375,95.92726135253906],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["If you want to crop your driving video, use this as driving_images instead"],"color":"#432","bgcolor":"#653"},{"id":189,"type":"LivePortraitCropper","pos":[-1212,-520],"size":[330,242],"flags":{},"order":23,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":446,"slot_index":0,"label":"pipeline"},{"name":"cropper","type":"LPCROPPER","link":477,"slot_index":1,"label":"cropper"},{"name":"source_image","type":"IMAGE","link":445,"label":"source_image"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":null,"slot_index":0,"shape":3,"label":"cropped_image"},{"name":"crop_info","type":"CROPINFO","links":[449],"slot_index":1,"shape":3,"label":"crop_info"}],"properties":{"Node name for S&R":"LivePortraitCropper"},"widgets_values":[512,2.3,0,-0.125,0,"large-small",true]},{"id":190,"type":"LivePortraitProcess","pos":[336,-444],"size":[430.8000183105469,330],"flags":{},"order":25,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":448,"label":"pipeline"},{"name":"crop_info","type":"CROPINFO","link":449,"label":"crop_info"},{"name":"source_image","type":"IMAGE","link":456,"label":"source_image"},{"name":"driving_images","type":"IMAGE","link":479,"label":"driving_images"},{"name":"opt_retargeting_info","type":"RETARGETINGINFO","link":492,"shape":7,"label":"opt_retargeting_info"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":[454],"slot_index":0,"shape":3,"label":"cropped_image"},{"name":"output","type":"LP_OUT","links":[452],"slot_index":1,"shape":3,"label":"output"}],"properties":{"Node name for S&R":"LivePortraitProcess"},"widgets_values":[false,0.03,true,1,"constant","source_video_smoothed",0.000003,false,1]},{"id":191,"type":"LivePortraitComposite","pos":[1089,-398],"size":[355.20001220703125,86],"flags":{},"order":26,"mode":0,"inputs":[{"name":"source_image","type":"IMAGE","link":457,"label":"source_image"},{"name":"cropped_image","type":"IMAGE","link":454,"label":"cropped_image"},{"name":"liveportrait_out","type":"LP_OUT","link":452,"label":"liveportrait_out"},{"name":"mask","type":"MASK","link":471,"shape":7,"label":"mask"}],"outputs":[{"name":"full_images","type":"IMAGE","links":[458],"slot_index":0,"shape":3,"label":"full_images"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"}],"properties":{"Node name for S&R":"LivePortraitComposite"},"widgets_values":[]},{"id":192,"type":"Reroute","pos":[199,-598],"size":[82,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":455,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[456,457],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":193,"type":"VHS_VideoInfo","pos":[-1103.6171875,24.777774810791016],"size":[393,206],"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[{"name":"video_info","type":"VHS_VIDEOINFO","link":481,"label":"video_info"}],"outputs":[{"name":"source_fpsüü®","type":"FLOAT","links":[],"shape":3,"label":"source_fpsüü®"},{"name":"source_frame_countüü®","type":"INT","links":null,"shape":3,"label":"source_frame_countüü®"},{"name":"source_durationüü®","type":"FLOAT","links":null,"shape":3,"label":"source_durationüü®"},{"name":"source_widthüü®","type":"INT","links":null,"shape":3,"label":"source_widthüü®"},{"name":"source_heightüü®","type":"INT","links":null,"shape":3,"label":"source_heightüü®"},{"name":"loaded_fpsüü¶","type":"FLOAT","links":null,"shape":3,"label":"loaded_fpsüü¶"},{"name":"loaded_frame_countüü¶","type":"INT","links":null,"shape":3,"label":"loaded_frame_countüü¶"},{"name":"loaded_durationüü¶","type":"FLOAT","links":null,"shape":3,"label":"loaded_durationüü¶"},{"name":"loaded_widthüü¶","type":"INT","links":null,"shape":3,"label":"loaded_widthüü¶"},{"name":"loaded_heightüü¶","type":"INT","links":null,"shape":3,"label":"loaded_heightüü¶"}],"properties":{"Node name for S&R":"VHS_VideoInfo"},"widgets_values":{}},{"id":194,"type":"Reroute","pos":[-1103.6171875,-83.22222900390625],"size":[82,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":480,"label":""}],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[462],"slot_index":0,"label":"AUDIO"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":195,"type":"LivePortraitCropper","pos":[-1104,181],"size":[330,242],"flags":{},"order":18,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":466,"slot_index":0,"label":"pipeline"},{"name":"cropper","type":"LPCROPPER","link":476,"label":"cropper"},{"name":"source_image","type":"IMAGE","link":465,"label":"source_image"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":[470],"slot_index":0,"shape":3,"label":"cropped_image"},{"name":"crop_info","type":"CROPINFO","links":[467],"slot_index":1,"shape":3,"label":"crop_info"}],"properties":{"Node name for S&R":"LivePortraitCropper"},"widgets_values":[512,2.3,0,-0.125,0,"large-small",true]},{"id":196,"type":"LivePortraitLoadMediaPipeCropper","pos":[-2625.92529296875,-338.4109802246094],"size":[315,82],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"cropper","type":"LPCROPPER","links":[],"slot_index":0,"shape":3,"label":"cropper"}],"properties":{"Node name for S&R":"LivePortraitLoadMediaPipeCropper"},"widgets_values":["CPU",true]},{"id":197,"type":"Reroute","pos":[-2184.9775390625,-204.14418029785156],"size":[115.5999984741211,26],"flags":{},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":478,"label":""}],"outputs":[{"name":"LPCROPPER","type":"LPCROPPER","links":[476,477],"slot_index":0,"label":"LPCROPPER"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":198,"type":"Note","pos":[-2935.92529296875,-348.41094970703125],"size":[265.68304443359375,168.53929138183594],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Choose your face detector here, MediaPipe doesn't run on GPU and isn't as good at detecting, but is faster on CPU and has Apache 2.0 license.\n\nInsightface can be run on GPU and is better at detecting, but it's model license is NON-COMMERCIAL"],"color":"#432","bgcolor":"#653"},{"id":199,"type":"Get resolution [Crystools]","pos":[1707,-436],"size":[214.20001220703125,96],"flags":{},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":482,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":null,"label":"width"},{"name":"height","type":"INT","links":null,"label":"height"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"},"widgets_values":[]},{"id":202,"type":"VHS_VideoInfo","pos":[-1500.110595703125,-897.8090209960938],"size":[262,206],"flags":{},"order":17,"mode":0,"inputs":[{"name":"video_info","type":"VHS_VIDEOINFO","link":489,"label":"video_info"}],"outputs":[{"name":"source_fpsüü®","type":"FLOAT","links":[490],"slot_index":0,"label":"source_fpsüü®"},{"name":"source_frame_countüü®","type":"INT","links":null,"label":"source_frame_countüü®"},{"name":"source_durationüü®","type":"FLOAT","links":null,"label":"source_durationüü®"},{"name":"source_widthüü®","type":"INT","links":null,"label":"source_widthüü®"},{"name":"source_heightüü®","type":"INT","links":null,"label":"source_heightüü®"},{"name":"loaded_fpsüü¶","type":"FLOAT","links":null,"label":"loaded_fpsüü¶"},{"name":"loaded_frame_countüü¶","type":"INT","links":null,"label":"loaded_frame_countüü¶"},{"name":"loaded_durationüü¶","type":"FLOAT","links":null,"label":"loaded_durationüü¶"},{"name":"loaded_widthüü¶","type":"INT","links":null,"label":"loaded_widthüü¶"},{"name":"loaded_heightüü¶","type":"INT","links":null,"label":"loaded_heightüü¶"}],"properties":{"Node name for S&R":"VHS_VideoInfo"},"widgets_values":{}},{"id":203,"type":"easy showAnything","pos":[-1477.110595703125,-627.8090209960938],"size":[210,76],"flags":{},"order":20,"mode":0,"inputs":[{"name":"anything","type":"*","link":490,"shape":7,"label":"anything"}],"outputs":[{"name":"output","type":"*","links":null,"label":"output"}],"properties":{"Node name for S&R":"easy showAnything"},"widgets_values":["24.0"]}],"links":[[187,81,0,82,0,"MASK"],[192,83,0,81,0,"MASK"],[302,133,0,8,2,"INT"],[324,133,0,146,2,"INT"],[434,165,0,78,0,"IMAGE"],[445,78,0,189,2,"IMAGE"],[446,1,0,189,0,"LIVEPORTRAITPIPE"],[448,1,0,190,0,"LIVEPORTRAITPIPE"],[449,189,1,190,1,"CROPINFO"],[452,190,1,191,2,"LP_OUT"],[454,190,0,191,1,"IMAGE"],[455,78,0,192,0,"*"],[456,192,0,190,2,"IMAGE"],[457,192,0,191,0,"IMAGE"],[458,191,0,181,0,"IMAGE"],[462,194,0,168,1,"VHS_AUDIO"],[465,182,0,195,2,"IMAGE"],[466,1,0,195,0,"LIVEPORTRAITPIPE"],[467,195,1,180,0,"CROPINFO"],[469,181,0,168,0,"IMAGE"],[470,195,0,134,0,"IMAGE"],[471,81,0,191,3,"MASK"],[476,197,0,195,1,"LPCROPPER"],[477,197,0,189,1,"LPCROPPER"],[478,129,0,197,0,"*"],[479,134,0,190,3,"IMAGE"],[480,8,2,194,0,"*"],[481,8,3,193,0,"VHS_VIDEOINFO"],[482,181,0,199,0,"IMAGE"],[485,8,0,182,0,"IMAGE"],[489,146,3,202,0,"VHS_VIDEOINFO"],[490,202,0,203,0,"*"],[491,146,0,165,0,"IMAGE"],[492,180,0,190,4,"RETARGETINGINFO"]],"groups":[{"id":2,"title":"input video","bounding":[-1910.110595703125,-981.4089965820312,1327,752.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":1,"title":"face detector","bounding":[-2946.51513671875,-420.1039123535156,654.8165283203125,342.8611755371094],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"voice video","bounding":[-1923.617431640625,-133.82223510742188,1841.1644287109375,639.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Group","bounding":[122,-876.5999755859375,1809.199951171875,964.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Group","bounding":[-2956.51513671875,-602.01025390625,927.3128051757812,746.2351684570312],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.4500000000000063,"offset":[3349.5574995673464,1214.770544908785]},"workspace_info":{"id":"147e748a-35ac-4199-8f0d-a2233675f368"}},"version":0.4}