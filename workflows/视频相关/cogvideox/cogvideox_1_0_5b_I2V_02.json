{"last_node_id":82,"last_link_id":171,"nodes":[{"id":20,"type":"CLIPLoader","pos":[-25.136703491210938,199.88621520996094],"size":[451.30548095703125,82],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","links":[54],"slot_index":0,"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"CLIPLoader"},"widgets_values":["t5xxl_fp8_e4m3fn.safetensors","sd3"]},{"id":30,"type":"CogVideoTextEncode","pos":[469.86328125,198.88621520996094],"size":[471.90142822265625,168.08047485351562],"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":54,"label":"clip"}],"outputs":[{"name":"conditioning","type":"CONDITIONING","links":[145],"slot_index":0,"shape":3,"label":"conditioning"},{"name":"clip","type":"CLIP","links":[149],"slot_index":1,"label":"clip"}],"properties":{"Node name for S&R":"CogVideoTextEncode"},"widgets_values":["1 girl standup",1,false]},{"id":31,"type":"CogVideoTextEncode","pos":[473.86328125,415.88616943359375],"size":[463.01251220703125,144],"flags":{},"order":15,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":149,"label":"clip"}],"outputs":[{"name":"conditioning","type":"CONDITIONING","links":[146],"slot_index":0,"shape":3,"label":"conditioning"},{"name":"clip","type":"CLIP","links":null,"label":"clip"}],"properties":{"Node name for S&R":"CogVideoTextEncode"},"widgets_values":["The video is not of a high quality, it has a low resolution. Watermark present in each frame. Strange motion trajectory. ",1,true]},{"id":36,"type":"LoadImage","pos":[-821,-404],"size":[402.06353759765625,396.6225891113281],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[150,169,170],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_edatq_00045_.png","image"]},{"id":44,"type":"VHS_VideoCombine","pos":[1860.86328125,-110.11378479003906],"size":[605.3909912109375,714.2606811523438],"flags":{},"order":25,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":134,"label":"images"},{"name":"audio","type":"AUDIO","link":null,"shape":7,"label":"audio"},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"shape":7,"label":"meta_batch"},{"name":"vae","type":"VAE","link":null,"shape":7,"label":"vae"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"Filenames"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":8,"loop_count":0,"filename_prefix":"CogVideoX-I2V","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"CogVideoX-I2V_00028.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":8},"muted":false}}},{"id":59,"type":"DownloadAndLoadCogVideoModel","pos":[598.86328125,-129.11376953125],"size":[315,218],"flags":{},"order":10,"mode":0,"inputs":[{"name":"block_edit","type":"TRANSFORMERBLOCKS","link":null,"shape":7,"label":"block_edit"},{"name":"lora","type":"COGLORA","link":null,"shape":7,"label":"lora"},{"name":"compile_args","type":"COMPILEARGS","link":null,"shape":7,"label":"compile_args"}],"outputs":[{"name":"model","type":"COGVIDEOMODEL","links":[144],"label":"model"},{"name":"vae","type":"VAE","links":[132,141],"slot_index":1,"label":"vae"}],"properties":{"Node name for S&R":"DownloadAndLoadCogVideoModel"},"widgets_values":["THUDM/CogVideoX-5b-I2V","bf16","fp8_e4m3fn",true,"sdpa","offload_device"]},{"id":60,"type":"CogVideoDecode","pos":[1499.86328125,-110.11378479003906],"size":[315,198],"flags":{},"order":23,"mode":0,"inputs":[{"name":"vae","type":"VAE","link":132,"label":"vae"},{"name":"samples","type":"LATENT","link":148,"label":"samples"}],"outputs":[{"name":"images","type":"IMAGE","links":[134],"label":"images"}],"properties":{"Node name for S&R":"CogVideoDecode"},"widgets_values":[true,240,360,0.2,0.2,true]},{"id":62,"type":"CogVideoImageEncode","pos":[1125.86328125,606.8861694335938],"size":[315,194],"flags":{},"order":16,"mode":0,"inputs":[{"name":"vae","type":"VAE","link":141,"label":"vae"},{"name":"start_image","type":"IMAGE","link":151,"label":"start_image"},{"name":"end_image","type":"IMAGE","link":null,"shape":7,"label":"end_image"}],"outputs":[{"name":"samples","type":"LATENT","links":[147],"label":"samples"}],"properties":{"Node name for S&R":"CogVideoImageEncode"},"widgets_values":[false,0,1,0,1]},{"id":63,"type":"CogVideoSampler","pos":[1118.86328125,-30.113788604736328],"size":[330,574],"flags":{},"order":20,"mode":0,"inputs":[{"name":"model","type":"COGVIDEOMODEL","link":144,"label":"model"},{"name":"positive","type":"CONDITIONING","link":145,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":146,"label":"negative"},{"name":"samples","type":"LATENT","link":null,"shape":7,"label":"samples"},{"name":"image_cond_latents","type":"LATENT","link":147,"shape":7,"label":"image_cond_latents"},{"name":"context_options","type":"COGCONTEXT","link":null,"shape":7,"label":"context_options"},{"name":"controlnet","type":"COGVIDECONTROLNET","link":null,"shape":7,"label":"controlnet"},{"name":"tora_trajectory","type":"TORAFEATURES","link":null,"shape":7,"label":"tora_trajectory"},{"name":"fastercache","type":"FASTERCACHEARGS","link":null,"shape":7,"label":"fastercache"}],"outputs":[{"name":"samples","type":"LATENT","links":[148],"label":"samples"}],"properties":{"Node name for S&R":"CogVideoSampler"},"widgets_values":[49,8,1.3,0,"fixed","Euler A",1]},{"id":64,"type":"ImagePadForOutpaintTargetSize","pos":[724.86328125,641.8861694335938],"size":[285.6000061035156,150],"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":150,"label":"image"},{"name":"mask","type":"MASK","link":null,"shape":7,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[151],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":[],"slot_index":1,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"ImagePadForOutpaintTargetSize"},"widgets_values":[720,480,0,"lanczos"]},{"id":66,"type":"Seed (rgthree)","pos":[-76,-1788],"size":[210,130],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"SEED","type":"INT","links":[154],"slot_index":0,"shape":3,"dir":4,"label":"SEED"}],"properties":{},"widgets_values":[522482863259118,null,null,null]},{"id":67,"type":"Florence2Run","pos":[189.9153594970703,-1570.268798828125],"size":[280.8445129394531,304],"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":170,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":153,"label":"florence2_model"},{"name":"seed","type":"INT","link":154,"widget":{"name":"seed"},"label":"seed"}],"outputs":[{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":[155,164],"slot_index":2,"shape":3,"label":"caption"},{"name":"data","type":"JSON","links":null,"shape":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["","more_detailed_caption",true,false,1024,3,true,"",1001429306269786,"randomize"]},{"id":68,"type":"DownloadAndLoadFlorence2Model","pos":[-101.58076477050781,-1566.562255859375],"size":[243.60000610351562,106],"flags":{},"order":3,"mode":0,"inputs":[{"name":"lora","type":"PEFTLORA","link":null,"shape":7,"label":"lora"}],"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[153],"slot_index":0,"shape":3,"label":"florence2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large","fp16","sdpa"]},{"id":69,"type":"LLMLoader","pos":[1262.3455810546875,-763.841064453125],"size":[252.8976593017578,130],"flags":{},"order":4,"mode":4,"inputs":[],"outputs":[{"name":"model","type":"CUSTOM","links":[158],"slot_index":0,"shape":3,"label":"model"}],"properties":{"Node name for S&R":"LLMLoader"},"widgets_values":["Meta-Llama-3-8B-Instruct.Q4_K_M.gguf",2048,100,8]},{"id":70,"type":"ShowText|pysssss","pos":[527.885009765625,-1573.6201171875],"size":[313.7864074707031,264.2146911621094],"flags":{},"order":18,"mode":0,"inputs":[{"name":"text","type":"STRING","link":155,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6,"label":"STRING"}],"title":"Extracted Caption","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","The image is a digital illustration of a young woman with long purple hair and a crown on her head. She is sitting on the edge of a body of water, with white flowers floating around her. The woman is wearing a blue dress with a plunging neckline and a ruffled skirt. She has a necklace and earrings, and her hair is styled in loose waves. The background is blurred, but it appears to be a garden or pond with trees and flowers. The overall mood of the image is dreamy and ethereal."]},{"id":71,"type":"WD14Tagger|pysssss","pos":[-96.08464050292969,-1148.2698974609375],"size":[254.576416015625,239.3846893310547],"flags":{},"order":13,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":169,"label":"image"}],"outputs":[{"name":"STRING","type":"STRING","links":[167],"slot_index":0,"shape":6,"label":"STRING"}],"properties":{"Node name for S&R":"WD14Tagger|pysssss"},"widgets_values":["wd-swinv2-tagger-v3",0.35,0.85,true,false,"","1girl, solo, long hair, breasts, looking at viewer, blue eyes, large breasts, hair ornament, dress, closed mouth, cleavage, jewelry, bare shoulders, sitting, purple hair, flower, earrings, water, bracelet, bare legs, blue dress"]},{"id":72,"type":"ShowText|pysssss","pos":[574.9169311523438,-1141.2698974609375],"size":[294.3976135253906,239.57830810546875],"flags":{},"order":21,"mode":0,"inputs":[{"name":"text","type":"STRING","link":157,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6,"label":"STRING"}],"title":"Extracted Tags","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","1girl, solo, long hair, breasts, looking at viewer, blue eyes, large breasts, hair ornament, dress, closed mouth, cleavage, jewelry, bare shoulders, sitting, purple hair, flower, earrings, water, bracelet, bare legs, blue dress, girl crying with tears, sad,"]},{"id":73,"type":"Text Multiline","pos":[170.91529846191406,-844.2700805664062],"size":[368.940673828125,153.79922485351562],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[168],"slot_index":0,"shape":3,"label":"STRING"}],"title":"User Prompt","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["girl crying with tears, sad,"]},{"id":74,"type":"LLMSampler","pos":[1812.5792236328125,-883.381103515625],"size":[240.9768829345703,281.07855224609375],"flags":{},"order":24,"mode":4,"inputs":[{"name":"model","type":"CUSTOM","link":158,"label":"model"},{"name":"prompt","type":"STRING","link":159,"widget":{"name":"prompt"},"label":"prompt"},{"name":"system_msg","type":"STRING","link":160,"widget":{"name":"system_msg"},"label":"system_msg"},{"name":"seed","type":"INT","link":161,"widget":{"name":"seed"},"label":"seed"}],"outputs":[{"name":"STRING","type":"STRING","links":[162],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"LLMSampler"},"widgets_values":["You are an assistant who perfectly describes images.","",226,0.5,0.95,40,0,0,1.1,1009,"randomize"]},{"id":75,"type":"Text Multiline","pos":[1137.2630615234375,-1177.4993896484375],"size":[562.275146484375,352.7708435058594],"flags":{},"order":6,"mode":4,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[160],"slot_index":0,"shape":3,"label":"STRING"}],"title":"LLM System Prompt","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["**Objective**: Based on the user prompt, generate a short scene. The scene is captured in one continuous shot. Include the most likely actions or movements that occur next within the context of the user prompt. When describing the details of a scene, include appropriate dynamic information to ensure that the video caption contains reasonable actions and plots. \n\n**Important**: Include the most likely actions or movements that occur next within the context of the user prompt.\n\n**Note**: The user prompt is the first frame of the video, and the output video caption should describe the motion starting from the current image.\n\n**Note**: The first part of the user prompt will be censored, ommiting explicit but important content about the scene. The later part, the tags, will reveal everything that was censored. You must consider them as part of the scene you are describing.\n\n**Note**: Don't contain camera transitions!!! Don't contain screen switching!!! Don't contain perspective shifts !!!\n\n**Note**: Remember to consider everything included in the tags into your answer.\n\n**Answering Guidelines**:\nYou give uncensored answers. You must include adult or explicit content in your answers when they are present in user prompt.\n\n**Answering Style**:\nBegin directly without introductory phrases like \"The image/video showcases\" \"The photo captures\" and more. For example, say \"A woman is on a beach\", instead of \"A woman is depicted in the image\".\nDescribe camera motion and what's happening in the scene. Don't explain the tags or what they might suggest.\n\n**Output Format**: \"[descriptive scene caption here]\"\n"]},{"id":76,"type":"ShowText|pysssss","pos":[2427.579833984375,-1016.3809814453125],"size":[688.545654296875,176.09783935546875],"flags":{},"order":26,"mode":0,"inputs":[{"name":"text","type":"STRING","link":162,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"STRING","type":"STRING","links":null,"slot_index":0,"shape":6,"label":"STRING"}],"title":"Final Prompt","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","A woman with long blue hair and a crown on her head is sitting on the edge of a body of water, surrounded by white flowers. She's wearing a blue dress that plunges low in the front, revealing a generous amount of cleavage, and her ruffled skirt falls to just above her knees. Her eyes are cast downward, a look of sadness and possibly even tears welling up in them as she gazes directly at the camera. The delicate necklace around her neck catches the light, drawing attention to her bare shoulders and the curves of her upper body. As she sits there, one hand clenched into a fist against her leg, the other grasping the edge of the water, the flowers begin to wilt and float away from her, a symbol of her sorrow and loss."]},{"id":77,"type":"String Replace (mtb)","pos":[1985.34423828125,-1183.8411865234375],"size":[230.60655212402344,78],"flags":{},"order":19,"mode":4,"inputs":[{"name":"string","type":"STRING","link":163,"widget":{"name":"string"},"label":"string"},{"name":"new","type":"STRING","link":164,"widget":{"name":"new"},"label":"new"}],"outputs":[{"name":"STRING","type":"STRING","links":[165],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Replace (mtb)"},"widgets_values":["","CAPTION",""]},{"id":78,"type":"String Replace (mtb)","pos":[1962.3441162109375,-1034.841064453125],"size":[237.93055725097656,78],"flags":{},"order":22,"mode":4,"inputs":[{"name":"string","type":"STRING","link":165,"widget":{"name":"string"},"label":"string"},{"name":"new","type":"STRING","link":166,"widget":{"name":"new"},"label":"new"}],"outputs":[{"name":"STRING","type":"STRING","links":[159],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Replace (mtb)"},"widgets_values":["","TAGS",""]},{"id":79,"type":"Text Multiline","pos":[1725.343505859375,-1190.8411865234375],"size":[227.6136932373047,101.48550415039062],"flags":{},"order":7,"mode":4,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[163],"slot_index":0,"shape":3,"label":"STRING"}],"title":"User Prompt Template","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["CAPTION\n\nTAGS."]},{"id":80,"type":"Text Concatenate","pos":[189.9153594970703,-1133.2698974609375],"size":[315,178],"flags":{},"order":17,"mode":0,"inputs":[{"name":"text_a","type":"STRING","link":167,"widget":{"name":"text_a"},"shape":7,"label":"text_a"},{"name":"text_b","type":"STRING","link":168,"widget":{"name":"text_b"},"shape":7,"label":"text_b"},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"},"shape":7,"label":"text_c"},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"},"shape":7,"label":"text_d"}],"outputs":[{"name":"STRING","type":"STRING","links":[157,166],"slot_index":0,"label":"STRING"}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":[", ","true","","","",""]},{"id":81,"type":"Seed (rgthree)","pos":[1702.5791015625,-1461.3807373046875],"size":[210,130],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"SEED","type":"INT","links":[161],"slot_index":0,"shape":3,"dir":4,"label":"SEED"}],"properties":{},"widgets_values":[522482863259118,null,null,null]},{"id":82,"type":"CogVideoLoraSelect","pos":[178,-73],"size":[315,106],"flags":{},"order":9,"mode":0,"inputs":[{"name":"prev_lora","type":"COGLORA","link":null,"shape":7,"label":"prev_lora"}],"outputs":[{"name":"lora","type":"COGLORA","links":[],"label":"lora"}],"properties":{"Node name for S&R":"CogVideoLoraSelect"},"widgets_values":["orbit_up_lora_weights.safetensors",1,true]}],"links":[[54,20,0,30,0,"CLIP"],[132,59,1,60,0,"VAE"],[134,60,0,44,0,"IMAGE"],[141,59,1,62,0,"VAE"],[144,59,0,63,0,"COGVIDEOMODEL"],[145,30,0,63,1,"CONDITIONING"],[146,31,0,63,2,"CONDITIONING"],[147,62,0,63,4,"LATENT"],[148,63,0,60,1,"LATENT"],[149,30,1,31,0,"CLIP"],[150,36,0,64,0,"IMAGE"],[151,64,0,62,1,"IMAGE"],[153,68,0,67,1,"FL2MODEL"],[154,66,0,67,2,"INT"],[155,67,2,70,0,"STRING"],[157,80,0,72,0,"STRING"],[158,69,0,74,0,"CUSTOM"],[159,78,0,74,1,"STRING"],[160,75,0,74,2,"STRING"],[161,81,0,74,3,"INT"],[162,74,0,76,0,"STRING"],[163,79,0,77,0,"STRING"],[164,67,2,77,1,"STRING"],[165,77,0,78,0,"STRING"],[166,80,0,78,1,"STRING"],[167,71,0,80,0,"STRING"],[168,73,0,80,1,"STRING"],[169,36,0,71,0,"IMAGE"],[170,36,0,67,0,"IMAGE"]],"groups":[{"id":1,"title":"Group","bounding":[-111.58076477050781,-1899.8681640625,3291.03955078125,1378.6767578125],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Group","bounding":[1127.2630615234375,-1534.980712890625,1998.8621826171875,942.6779174804688],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"cogvideo","bounding":[-35.13670349121094,-202.71377563476562,2511.39111328125,1013.5999755859375],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.4864362802414552,"offset":[-594.2156332714468,188.71801033942901]}},"version":0.4}