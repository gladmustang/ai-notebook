{"id":"bec1819e-b5dc-4c7f-9859-88100debd59e","revision":0,"last_node_id":110,"last_link_id":144,"nodes":[{"id":1,"type":"GetNode","pos":[3588.285400390625,5763.42919921875],"size":[210,34],"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[10]}],"title":"Get_WanVAE","properties":{},"widgets_values":["WanVAE"],"color":"#322","bgcolor":"#533"},{"id":2,"type":"GetNode","pos":[3008.28466796875,5513.42919921875],"size":[210,34],"flags":{"collapsed":true},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"WANTEXTENCODER","type":"WANTEXTENCODER","links":[48]}],"title":"Get_WanTextEncoder","properties":{},"widgets_values":["WanTextEncoder"],"color":"#432","bgcolor":"#653"},{"id":3,"type":"GetNode","pos":[3018.28466796875,5563.42919921875],"size":[210,34],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"WANVIDEOMODEL","type":"WANVIDEOMODEL","links":[49]}],"title":"Get_WanModel","properties":{},"widgets_values":["WanModel"],"color":"#223","bgcolor":"#335"},{"id":4,"type":"GetNode","pos":[3818.28466796875,5733.42919921875],"size":[210,34],"flags":{"collapsed":true},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"WANVIDEOMODEL","type":"WANVIDEOMODEL","links":[24]}],"title":"Get_WanModel","properties":{},"widgets_values":["WanModel"],"color":"#223","bgcolor":"#335"},{"id":8,"type":"GetNode","pos":[4158.28564453125,5663.42919921875],"size":[210,34],"flags":{"collapsed":true},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[19]}],"title":"Get_WanVAE","properties":{},"widgets_values":["WanVAE"],"color":"#322","bgcolor":"#533"},{"id":11,"type":"GetImageSizeAndCount","pos":[3082.201904296875,5954.5517578125],"size":[277.20001220703125,86],"flags":{},"order":78,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":144}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[11]},{"label":"720 width","localized_name":"width","name":"width","type":"INT","links":[14]},{"label":"1280 height","localized_name":"height","name":"height","type":"INT","links":[15]},{"label":"40 count","localized_name":"count","name":"count","type":"INT","links":[16]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"2aa4da0f587f68c1c255b0152ed8f5c334ebe4b4","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":14,"type":"WanVideoVACEEncode","pos":[3578.285400390625,5813.42919921875],"size":[343.59088134765625,334],"flags":{},"order":80,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":10},{"localized_name":"input_frames","name":"input_frames","shape":7,"type":"IMAGE","link":11},{"localized_name":"ref_images","name":"ref_images","shape":7,"type":"IMAGE","link":12},{"localized_name":"input_masks","name":"input_masks","shape":7,"type":"MASK","link":13},{"localized_name":"prev_vace_embeds","name":"prev_vace_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":14},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":15},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":16},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"vace_start_percent","name":"vace_start_percent","type":"FLOAT","widget":{"name":"vace_start_percent"},"link":null},{"localized_name":"vace_end_percent","name":"vace_end_percent","type":"FLOAT","widget":{"name":"vace_end_percent"},"link":null},{"localized_name":"tiled_vae","name":"tiled_vae","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_vae"},"link":null}],"outputs":[{"localized_name":"vace_embeds","name":"vace_embeds","type":"WANVIDIMAGE_EMBEDS","links":[26]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoVACEEncode"},"widgets_values":[480,832,29,1.0000000000000002,0,1,false],"color":"#322","bgcolor":"#533"},{"id":15,"type":"SetNode","pos":[3100.40478515625,6127.84765625],"size":[210,34],"flags":{"collapsed":true},"order":70,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":17}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[12]}],"title":"Set_reference_image","properties":{"previousName":""},"widgets_values":["reference_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":16,"type":"VHS_VideoCombine","pos":[3120.84375,6216.5673828125],"size":[386.8023681640625,1000.0930786132812],"flags":{},"order":75,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":18},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideoWrapper_VACE_startendframe","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideoWrapper_VACE_startendframe_00026.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":16,"workflow":"WanVideoWrapper_VACE_startendframe_00026.png","fullpath":"D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\temp\\WanVideoWrapper_VACE_startendframe_00026.mp4"}}}},{"id":17,"type":"Note","pos":[2518.21630859375,6132.51171875],"size":[360.171630859375,162.24398803710938],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["There are multiple ways to use control signal:\n\n- with start frame + control frames:\n  when you already have stylized first frame\n\n- control frames + reference\n  when your input image is not the exact first frame\n\n- all at same time\n  when you want extra boost to the likeness\n"],"color":"#432","bgcolor":"#653"},{"id":18,"type":"WanVideoDecode","pos":[4398.2861328125,5903.42919921875],"size":[315,198],"flags":{},"order":82,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":19},{"localized_name":"samples","name":"samples","type":"LATENT","link":20},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[21]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoDecode"},"widgets_values":[false,272,272,144,128],"color":"#322","bgcolor":"#533"},{"id":21,"type":"WanVideoSampler","pos":[3988.285400390625,5743.42919921875],"size":[312.8956298828125,864.8956298828125],"flags":{},"order":81,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":24},{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","link":25},{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":26},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"teacache_args","name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":null},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"localized_name":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"localized_name":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"localized_name":"fantasytalking_embeds","name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":27},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"},"link":null},{"localized_name":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"},"link":null}],"outputs":[{"localized_name":"samples","name":"samples","type":"LATENT","links":[20]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"2d2a184723dae88388e130659f51c36fcadeaba8","Node name for S&R":"WanVideoSampler"},"widgets_values":[4,1.0000000000000002,8.000000000000002,0,"fixed",true,"unipc",0,1,false,"comfy"]},{"id":23,"type":"PreviewImage","pos":[2178.157958984375,6090.470703125],"size":[210,258],"flags":{},"order":71,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":31}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.32","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":24,"type":"ImageResizeKJv2","pos":[1786.56982421875,6008.150390625],"size":[270,242],"flags":{},"order":67,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":32},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":33},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":34},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[17,31]},{"localized_name":"width","name":"width","type":"INT","links":[]},{"localized_name":"height","name":"height","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[512,512,"lanczos","resize","255,255,255","center",16]},{"id":27,"type":"ImageResizeKJv2","pos":[1879.8902587890625,6852.29931640625],"size":[270,242],"flags":{},"order":72,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":122},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":38},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":39},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[28]},{"localized_name":"width","name":"width","type":"INT","links":[]},{"localized_name":"height","name":"height","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[512,512,"nearest-exact","pad_edge","255,255,255","center",16]},{"id":29,"type":"DownloadAndLoadDepthAnythingV2Model","pos":[1644.042724609375,5349.89404296875],"size":[372.3266296386719,61.27016067504883],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null}],"outputs":[{"localized_name":"da_v2_model","name":"da_v2_model","type":"DAMODEL","links":[51]}],"properties":{"cnr_id":"comfyui-depthanythingv2","ver":"003d7b44bafd3a8a4c3693a9ca3ddcd72f4883ab","Node name for S&R":"DownloadAndLoadDepthAnythingV2Model"},"widgets_values":["depth_anything_v2_vitl_fp16.safetensors"]},{"id":33,"type":"Any Switch (rgthree)","pos":[2557.21484375,5642.4990234375],"size":[250.08045959472656,106],"flags":{},"order":73,"mode":0,"inputs":[{"dir":3,"name":"any_01","type":"IMAGE","link":46},{"dir":3,"name":"any_02","type":"IMAGE","link":47},{"dir":3,"name":"any_03","type":"IMAGE","link":null},{"dir":3,"name":"any_04","type":"IMAGE","link":null},{"dir":3,"name":"any_05","type":"IMAGE","link":null}],"outputs":[{"dir":4,"label":"IMAGE","name":"*","shape":3,"type":"IMAGE","links":[36]}],"properties":{"cnr_id":"rgthree-comfy","ver":"b84f39c7c224de765de0b54c55b967329011819d"},"widgets_values":[]},{"id":35,"type":"WanVideoTextEncode","pos":[3008.28466796875,5623.42919921875],"size":[420.30511474609375,261.5306701660156],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"t5","name":"t5","type":"WANTEXTENCODER","link":48},{"localized_name":"model_to_offload","name":"model_to_offload","shape":7,"type":"WANVIDEOMODEL","link":49},{"localized_name":"positive_prompt","name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"},"link":null},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","widget":{"name":"negative_prompt"},"link":null},{"localized_name":"force_offload","name":"force_offload","shape":7,"type":"BOOLEAN","widget":{"name":"force_offload"},"link":null}],"outputs":[{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","slot_index":0,"links":[25]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoTextEncode"},"widgets_values":["ÁæéÂ•≥ËΩ¶Ê®°Âú®ËΩ¶Â±ïÁé∞Âú∫ÊëÜpose","Ëâ≤Ë∞ÉËâ≥‰∏ΩÔºåËøáÊõùÔºåÈùôÊÄÅÔºåÁªÜËäÇÊ®°Á≥ä‰∏çÊ∏ÖÔºåÂ≠óÂπïÔºåÈ£éÊ†ºÔºå‰ΩúÂìÅÔºåÁîª‰ΩúÔºåÁîªÈù¢ÔºåÈùôÊ≠¢ÔºåÊï¥‰ΩìÂèëÁÅ∞ÔºåÊúÄÂ∑ÆË¥®ÈáèÔºå‰ΩéË¥®ÈáèÔºåJPEGÂéãÁº©ÊÆãÁïôÔºå‰∏ëÈôãÁöÑÔºåÊÆãÁº∫ÁöÑÔºåÂ§ö‰ΩôÁöÑÊâãÊåáÔºåÁîªÂæó‰∏çÂ•ΩÁöÑÊâãÈÉ®ÔºåÁîªÂæó‰∏çÂ•ΩÁöÑËÑ∏ÈÉ®ÔºåÁï∏ÂΩ¢ÁöÑÔºåÊØÅÂÆπÁöÑÔºåÂΩ¢ÊÄÅÁï∏ÂΩ¢ÁöÑËÇ¢‰ΩìÔºåÊâãÊåáËûçÂêàÔºåÈùôÊ≠¢‰∏çÂä®ÁöÑÁîªÈù¢ÔºåÊùÇ‰π±ÁöÑËÉåÊôØÔºå‰∏âÊù°ËÖøÔºåËÉåÊôØ‰∫∫ÂæàÂ§öÔºåÂÄíÁùÄËµ∞",true],"color":"#432","bgcolor":"#653"},{"id":59,"type":"SetNode","pos":[727.5994873046875,5517.44482421875],"size":[210,58],"flags":{},"order":48,"mode":0,"inputs":[{"name":"VHS_VIDEOINFO","type":"VHS_VIDEOINFO","link":81}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_video_info","properties":{"previousName":"video_info"},"widgets_values":["video_info"]},{"id":19,"type":"GetImageSizeAndCount","pos":[4398.2861328125,6173.42919921875],"size":[277.20001220703125,86],"flags":{},"order":83,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":21}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[93]},{"label":"720 width","localized_name":"width","name":"width","type":"INT","links":null},{"label":"1280 height","localized_name":"height","name":"height","type":"INT","links":[1]},{"label":"37 count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":62,"type":"GetNode","pos":[4975.39794921875,5398.10009765625],"size":[210,60],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"VHS_VIDEOINFO","type":"VHS_VIDEOINFO","links":[85]}],"title":"Get_video_info","properties":{},"widgets_values":["video_info"]},{"id":65,"type":"Reroute","pos":[3307.99853515625,7701.86083984375],"size":[75,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":89}],"outputs":[{"name":"","type":"*","links":[91]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":66,"type":"Reroute","pos":[3325.726806640625,7543.9384765625],"size":[75,26],"flags":{},"order":53,"mode":0,"inputs":[{"name":"","type":"*","link":94}],"outputs":[{"name":"","type":"FLOW_CONTROL","links":[96]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":67,"type":"WanVideoTorchCompileSettings","pos":[1765.678466796875,3513.910400390625],"size":[390.5999755859375,202],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null},{"localized_name":"compile_transformer_blocks_only","name":"compile_transformer_blocks_only","type":"BOOLEAN","widget":{"name":"compile_transformer_blocks_only"},"link":null},{"localized_name":"dynamo_recompile_limit","name":"dynamo_recompile_limit","shape":7,"type":"INT","widget":{"name":"dynamo_recompile_limit"},"link":null}],"outputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","slot_index":0,"links":[]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true,128]},{"id":68,"type":"SetNode","pos":[2305.20263671875,4479.8662109375],"size":[210,34],"flags":{"collapsed":true},"order":31,"mode":0,"inputs":[{"name":"WANTEXTENCODER","type":"WANTEXTENCODER","link":97}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_WanTextEncoder","properties":{"previousName":""},"widgets_values":["WanTextEncoder"],"color":"#432","bgcolor":"#653"},{"id":69,"type":"SetNode","pos":[2367.401611328125,3825.041015625],"size":[210,34],"flags":{"collapsed":true},"order":41,"mode":0,"inputs":[{"name":"WANVIDEOMODEL","type":"WANVIDEOMODEL","link":98}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_WanModel","properties":{"previousName":""},"widgets_values":["WanModel"],"color":"#223","bgcolor":"#335"},{"id":70,"type":"Note","pos":[1390.14501953125,3462.538330078125],"size":[303.0501403808594,88],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you have Triton installed, connect this for ~30% speed increase"],"color":"#432","bgcolor":"#653"},{"id":71,"type":"Note","pos":[1393.8677978515625,3682.421630859375],"size":[325.3857421875,177.342529296875],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Adjust the blocks to swap based on your VRAM, this is a tradeoff between speed and memory usage.\n\n\nIMPORTANT!\nWhen at least 1 VACE block is swapped, the intermediate outputs are also offloaded reducing VRAM usage considerably"],"color":"#432","bgcolor":"#653"},{"id":72,"type":"Note","pos":[2356.85302734375,3910.644287109375],"size":[344.17034912109375,107.31356811523438],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["While the WanVideo 1.3B model is in FP32, the VACE module in it is in BF16, so using fp16_fast is technically lossy, but seems to be fine if you want the speed boost."],"color":"#432","bgcolor":"#653"},{"id":73,"type":"MarkdownNote","pos":[2213.224609375,3536.58251953125],"size":[368.480712890625,147.49659729003906],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[],"title":"Model download link","properties":{},"widgets_values":["Original model link, you can rename to whatever you like:\n\n[https://huggingface.co/ali-vilab/VACE-Wan2.1-1.3B-Preview/blob/main/diffusion_pytorch_model.safetensors](https://huggingface.co/ali-vilab/VACE-Wan2.1-1.3B-Preview/blob/main/diffusion_pytorch_model.safetensors)"],"color":"#432","bgcolor":"#653"},{"id":74,"type":"SetNode","pos":[2245.265869140625,4339.955078125],"size":[210,34],"flags":{"collapsed":true},"order":32,"mode":0,"inputs":[{"name":"WANVAE","type":"WANVAE","link":99}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_WanVAE","properties":{"previousName":""},"widgets_values":["WanVAE"],"color":"#322","bgcolor":"#533"},{"id":75,"type":"LoadWanVideoT5TextEncoder","pos":[1905.0687255859375,4484.8466796875],"size":[377.1661376953125,130],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"load_device","name":"load_device","shape":7,"type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"quantization","name":"quantization","shape":7,"type":"COMBO","widget":{"name":"quantization"},"link":null}],"outputs":[{"localized_name":"wan_t5_model","name":"wan_t5_model","type":"WANTEXTENCODER","slot_index":0,"links":[97]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"LoadWanVideoT5TextEncoder"},"widgets_values":["kajia\\umt5-xxl-enc-bf16.safetensors","bf16","offload_device","disabled"],"color":"#432","bgcolor":"#653"},{"id":76,"type":"WanVideoVAELoader","pos":[1893.9783935546875,4314.904296875],"size":[315,82],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","slot_index":0,"links":[99]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["kajia\\Wan2_1_VAE_bf16.safetensors","bf16"],"color":"#322","bgcolor":"#533"},{"id":77,"type":"Note","pos":[1958.11572265625,4076.143310546875],"size":[374.3061828613281,171.9547576904297],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["fp8_fast seems to cause quality degradation\n\nfp_16_fast enables \"Full FP16 Accmumulation in FP16 GEMMs\" feature available in the very latest pytorch nightly, this is around 20% speed boost. \n\nSageattn if you have it installed can be used for almost double inference speed"],"color":"#432","bgcolor":"#653"},{"id":78,"type":"WanVideoVACEModelSelect","pos":[1355.7547607421875,4134.56884765625],"size":[486.3644714355469,75.51844787597656],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"vace_model","name":"vace_model","type":"COMBO","widget":{"name":"vace_model"},"link":null}],"outputs":[{"localized_name":"vace_model","name":"vace_model","type":"VACEPATH","links":[102]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"7d238261361608683ae6627aec6994cb69554ca7","Node name for S&R":"WanVideoVACEModelSelect"},"widgets_values":["videos\\kajia\\Wan2_1-VACE_module_14B_bf16.safetensors"]},{"id":79,"type":"MarkdownNote","pos":[1343.8426513671875,4256.4677734375],"size":[536.0852661132812,204.4370574951172],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can also use the VACE as separate module with any normal matching size T2V model (not Fun models):\n\n1.3B:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VACE_1_3B_preview_bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VACE_1_3B_preview_bf16.safetensors)\n\n14B:\n\nfp8:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-VACE_module_14B_fp8_e4m3fn.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-VACE_module_14B_fp8_e4m3fn.safetensors)\n\nbf16:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-VACE_module_14B_bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-VACE_module_14B_bf16.safetensors)"],"color":"#432","bgcolor":"#653"},{"id":80,"type":"WanVideoModelLoader","pos":[1818.87548828125,3776.36328125],"size":[477.4410095214844,254],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":null},{"localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":100},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":101},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"vace_model","name":"vace_model","shape":7,"type":"VACEPATH","link":102},{"localized_name":"fantasytalking_model","name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[98]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["videos\\kajia\\Wan2_1-T2V-14B_fp8_e4m3fn.safetensors","bf16","fp8_e4m3fn","offload_device","sageattn"],"color":"#223","bgcolor":"#335"},{"id":82,"type":"Note","pos":[1482.1221923828125,2953.98095703125],"size":[670.6842041015625,160.2573699951172],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["how to use CausVid:\nhttps://www.reddit.com/r/StableDiffusion/comments/1knuafk/causvid_lora_massive_speedup_for_wan21_made_by/\n\nThese are very experimental LoRAs, and not the proper way to use CausVid, however the distillation (both cfg and steps) seem to carry over pretty well, mostly useful with VACE when used at around 0.3-0.5 strength, cfg 1.0 and 2-4 steps. Make sure to disable any cfg enhancement feature as well as TeaCache etc. when using them.\n\n\nSLG and zero star do nothing when cfg is 1.0, and thus not used at all, neither does negative prompt. TeaCache is pointless with the low step count as well, and doesn't really even work with it anyway."],"color":"#432","bgcolor":"#653"},{"id":84,"type":"WanVideoBlockSwap","pos":[1308.58740234375,3911.739013671875],"size":[315,154],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"},"link":null},{"localized_name":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"},"link":null},{"localized_name":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"},"link":null},{"localized_name":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"},"link":null}],"outputs":[{"localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","slot_index":0,"links":[100]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"3869b0482b615b6a8fd6f346467c5ef6627eed72","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[15,false,false,true,15],"color":"#223","bgcolor":"#335"},{"id":81,"type":"WanVideoLoraSelect","pos":[1555.23388671875,3170.79931640625],"size":[270,126],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS","link":null},{"localized_name":"lora","name":"lora","type":"COMBO","widget":{"name":"lora"},"link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"},"link":null}],"outputs":[{"localized_name":"lora","name":"lora","type":"WANVIDLORA","links":[101]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"fd562e9730ded3bb36af461c517731208dfc3746","Node name for S&R":"WanVideoLoraSelect"},"widgets_values":["wan2.1\\Wan21_CausVid_14B_T2V_lora_rank32.safetensors",0.4000000000000001,false]},{"id":85,"type":"GetNode","pos":[4976.400390625,5273.27783203125],"size":[210,60],"flags":{},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[103,104]}],"title":"Get_audio","properties":{},"widgets_values":["audio"]},{"id":57,"type":"SetNode","pos":[735.896728515625,5413.47412109375],"size":[210,60],"flags":{},"order":47,"mode":0,"inputs":[{"name":"AUDIO","type":"AUDIO","link":80}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_audio","properties":{"previousName":"audio"},"widgets_values":["audio"]},{"id":86,"type":"easy showAnything","pos":[724.2259521484375,5973.91748046875],"size":[210,88],"flags":{},"order":64,"mode":0,"inputs":[{"label":"anything","localized_name":"anything","name":"anything","shape":7,"type":"*","link":105}],"outputs":[{"label":"output","localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["41"]},{"id":89,"type":"easy showAnything","pos":[610.7886352539062,5281.84619140625],"size":[210,88],"flags":{},"order":51,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":108}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["2"]},{"id":53,"type":"SimpleMath+","pos":[251.21707153320312,5829.8759765625],"size":[315,98],"flags":{},"order":54,"mode":0,"inputs":[{"label":"a","localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT","link":70},{"label":"b","localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT","link":71},{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null},{"label":"c","name":"c","shape":7,"type":"*","link":null}],"outputs":[{"label":"INT","localized_name":"INT","name":"INT","type":"INT","slot_index":0,"links":[74,109]},{"label":"FLOAT","localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"SimpleMath+"},"widgets_values":["a*b"]},{"id":92,"type":"easy showAnything","pos":[287.2541198730469,5989.296875],"size":[210,88],"flags":{},"order":61,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":109}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["0"]},{"id":50,"type":"easy forLoopStart","pos":[280.2624816894531,5411.2021484375],"size":[210,118],"flags":{},"order":50,"mode":0,"inputs":[{"label":"initial_value1","localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":null},{"label":"initial_value2","name":"initial_value2","type":"*","link":null},{"label":"total","name":"total","type":"INT","widget":{"name":"total"},"link":106}],"outputs":[{"label":"flow","localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","slot_index":0,"links":[94]},{"label":"index","localized_name":"index","name":"index","type":"INT","slot_index":1,"links":[70,110]},{"label":"value1","localized_name":"value1","name":"value1","type":"*","slot_index":2,"links":[89]},{"label":"value2","name":"value2","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy forLoopStart"},"widgets_values":[9],"color":"#223","bgcolor":"#335"},{"id":93,"type":"easy showAnything","pos":[522.1861572265625,5431.55078125],"size":[210,88],"flags":{},"order":55,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":110}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["0"]},{"id":5,"type":"EmptyImage","pos":[6363.1484375,5758.9365234375],"size":[315,130],"flags":{"collapsed":true},"order":85,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":1},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"INT","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[3]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"EmptyImage"},"widgets_values":[8,512,1,0]},{"id":7,"type":"ImageConcatMulti","pos":[6314.443359375,5482.36962890625],"size":[315,150],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":5},{"localized_name":"image_2","name":"image_2","type":"IMAGE","link":6},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[4]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028"},"widgets_values":[2,"down",true,null]},{"id":10,"type":"AddLabel","pos":[6402.28125,5301.05615234375],"size":[315,274],"flags":{"collapsed":true},"order":34,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":7},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[5]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","reference image","up"]},{"id":13,"type":"AddLabel","pos":[6412.611328125,5407.421875],"size":[315,274],"flags":{"collapsed":true},"order":35,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":9},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"text_x","name":"text_x","type":"INT","widget":{"name":"text_x"},"link":null},{"localized_name":"text_y","name":"text_y","type":"INT","widget":{"name":"text_y"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"label_color","name":"label_color","type":"STRING","widget":{"name":"label_color"},"link":null},{"localized_name":"font","name":"font","type":"COMBO","widget":{"name":"font"},"link":null},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[6]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","control_video","up"]},{"id":9,"type":"GetNode","pos":[6101.56982421875,5328.95166015625],"size":[210,58],"flags":{"collapsed":false},"order":22,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[7]}],"title":"Get_reference_image","properties":{},"widgets_values":["reference_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":12,"type":"GetNode","pos":[6095.56396484375,5445.76025390625],"size":[210,58],"flags":{"collapsed":false},"order":23,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[9]}],"title":"Get_initVideo","properties":{},"widgets_values":["initVideo"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":6,"type":"ImageConcatMulti","pos":[6287.43310546875,5803.0703125],"size":[315,170],"flags":{},"order":88,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":112},{"localized_name":"image_2","name":"image_2","type":"IMAGE","link":3},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null},{"name":"image_3","type":"IMAGE","link":4}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[115]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028"},"widgets_values":[3,"left",true,null]},{"id":25,"type":"VHS_VideoInfo","pos":[4981.1240234375,5556.6064453125],"size":[225.59765625,206],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","link":85}],"outputs":[{"localized_name":"source_fpsüü®","name":"source_fpsüü®","type":"FLOAT","links":null},{"localized_name":"source_frame_countüü®","name":"source_frame_countüü®","type":"INT","links":null},{"localized_name":"source_durationüü®","name":"source_durationüü®","type":"FLOAT","links":null},{"localized_name":"source_widthüü®","name":"source_widthüü®","type":"INT","links":null},{"localized_name":"source_heightüü®","name":"source_heightüü®","type":"INT","links":null},{"localized_name":"loaded_fpsüü¶","name":"loaded_fpsüü¶","type":"FLOAT","links":[23,44]},{"localized_name":"loaded_frame_countüü¶","name":"loaded_frame_countüü¶","type":"INT","links":null},{"localized_name":"loaded_durationüü¶","name":"loaded_durationüü¶","type":"FLOAT","links":null},{"localized_name":"loaded_widthüü¶","name":"loaded_widthüü¶","type":"INT","links":null},{"localized_name":"loaded_heightüü¶","name":"loaded_heightüü¶","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_VideoInfo"},"widgets_values":{}},{"id":63,"type":"easy batchAnything","pos":[4997.54931640625,5873.2685546875],"size":[210,46],"flags":{},"order":84,"mode":0,"inputs":[{"label":"any_1","localized_name":"any_1","name":"any_1","type":"*","link":91},{"label":"any_2","localized_name":"any_2","name":"any_2","type":"*","link":93}],"outputs":[{"label":"batch","localized_name":"batch","name":"batch","type":"*","slot_index":0,"links":[87]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy batchAnything"},"widgets_values":[]},{"id":64,"type":"easy forLoopEnd","pos":[5012.974609375,6059.1328125],"size":[178,66],"flags":{},"order":86,"mode":0,"inputs":[{"label":"flow","localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","link":96},{"label":"initial_value1","localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":87},{"label":"initial_value2","name":"initial_value2","type":"*","link":null}],"outputs":[{"label":"value1","localized_name":"value1","name":"value1","type":"*","slot_index":0,"links":[88,112]},{"label":"value2","name":"value2","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy forLoopEnd"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":31,"type":"VHS_VideoCombine","pos":[5379.9765625,5307.513671875],"size":[220.5830078125,704.592041015625],"flags":{},"order":87,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":88},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":103},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":44},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideoWrapper_VACE_controlVideo","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideoWrapper_VACE_controlVideo_00097-audio.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":10,"workflow":"WanVideoWrapper_VACE_controlVideo_00097.png","fullpath":"D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\output\\WanVideoWrapper_VACE_controlVideo_00097-audio.mp4"}}}},{"id":20,"type":"VHS_VideoCombine","pos":[6755.92431640625,5260.67333984375],"size":[605.903076171875,1037.2977294921875],"flags":{},"order":89,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":115},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":104},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":23},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideoWrapper_VACE_startendframe","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideoWrapper_VACE_startendframe_00027-audio.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":10,"workflow":"WanVideoWrapper_VACE_startendframe_00027.png","fullpath":"D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\temp\\WanVideoWrapper_VACE_startendframe_00027-audio.mp4"}}}},{"id":32,"type":"MaskPreview","pos":[2695.32958984375,6717.43603515625],"size":[140,246],"flags":{},"order":79,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":45}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.32","Node name for S&R":"MaskPreview"},"widgets_values":[]},{"id":36,"type":"LayerUtility: ImageScaleByAspectRatio V2","pos":[1690.8087158203125,5542.3291015625],"size":[363.6851501464844,330],"flags":{},"order":62,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":75},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"aspect_ratio","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"proportional_width","name":"proportional_width","type":"INT","widget":{"name":"proportional_width"},"link":null},{"localized_name":"proportional_height","name":"proportional_height","type":"INT","widget":{"name":"proportional_height"},"link":null},{"localized_name":"fit","name":"fit","type":"COMBO","widget":{"name":"fit"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"round_to_multiple","name":"round_to_multiple","type":"COMBO","widget":{"name":"round_to_multiple"},"link":null},{"localized_name":"scale_to_side","name":"scale_to_side","type":"COMBO","widget":{"name":"scale_to_side"},"link":null},{"localized_name":"scale_to_length","name":"scale_to_length","type":"INT","widget":{"name":"scale_to_length"},"link":null},{"localized_name":"background_color","name":"background_color","type":"STRING","widget":{"name":"background_color"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[52,53]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"original_size","name":"original_size","type":"BOX","links":null},{"localized_name":"width","name":"width","type":"INT","links":[33,38]},{"localized_name":"height","name":"height","type":"INT","links":[34,39]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"c0fb64d0ebcb81c6c445a8af79ecee24bc3845b0","Node name for S&R":"LayerUtility: ImageScaleByAspectRatio V2"},"widgets_values":["9:16",1,1,"crop","lanczos","8","longest",1280,"#000000"],"color":"rgba(38, 73, 116, 0.7)"},{"id":28,"type":"PreviewImage","pos":[2424.960693359375,6711.232421875],"size":[140,246],"flags":{},"order":77,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":40}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.32","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":54,"type":"VHS_LoadVideoPath","pos":[702.41015625,5622.71728515625],"size":[298.98614501953125,286],"flags":{},"order":60,"mode":0,"inputs":[{"label":"meta_batch","localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":72},{"label":"vae","localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"label":"video","localized_name":"video","name":"video","type":"STRING","widget":{"name":"video"},"link":73},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"label":"skip_first_frames","localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":74},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[75,119]},{"label":"frame_count","localized_name":"frame_count","name":"frame_count","type":"INT","slot_index":1,"links":[78,105]},{"label":"audio","localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"label":"video_info","localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_LoadVideoPath"},"widgets_values":{"video":"C:\\KSK\\ComfyUI-Main\\output\\HYGGUFCKW_00004.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","videopreview":{"hidden":false,"paused":false,"params":{"force_rate":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"filename":"C:\\KSK\\ComfyUI-Main\\output\\HYGGUFCKW_00004.mp4","type":"path","format":"video/mp4"},"muted":false}}},{"id":96,"type":"PreviewBridge","pos":[1256.7371826171875,6296.349609375],"size":[270,338],"flags":{},"order":68,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":120},{"localized_name":"image","name":"image","type":"STRING","widget":{"name":"image"},"link":null},{"localized_name":"block","name":"block","shape":7,"type":"BOOLEAN","widget":{"name":"block"},"link":null},{"localized_name":"restore_mask","name":"restore_mask","shape":7,"type":"COMBO","widget":{"name":"restore_mask"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[122]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.8.1","Node name for S&R":"PreviewBridge"},"widgets_values":["$96-0",false,"never"]},{"id":30,"type":"ImagePadKJ","pos":[1770.584716796875,6387.11669921875],"size":[292.10888671875,282],"flags":{"collapsed":false},"order":40,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":123},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"target_width","name":"target_width","shape":7,"type":"INT","link":null},{"localized_name":"target_height","name":"target_height","shape":7,"type":"INT","link":null},{"localized_name":"left","name":"left","type":"INT","widget":{"name":"left"},"link":null},{"localized_name":"right","name":"right","type":"INT","widget":{"name":"right"},"link":null},{"localized_name":"top","name":"top","type":"INT","widget":{"name":"top"},"link":null},{"localized_name":"bottom","name":"bottom","type":"INT","widget":{"name":"bottom"},"link":null},{"localized_name":"extra_padding","name":"extra_padding","type":"INT","widget":{"name":"extra_padding"},"link":null},{"localized_name":"pad_mode","name":"pad_mode","type":"COMBO","widget":{"name":"pad_mode"},"link":null},{"localized_name":"color","name":"color","type":"STRING","widget":{"name":"color"},"link":null},{"localized_name":"masks","name":"masks","shape":7,"type":"MASK","link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[32]},{"localized_name":"masks","name":"masks","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"6c997afd5f2d1d31d8d4c30d0526e04b982139f4","Node name for S&R":"ImagePadKJ"},"widgets_values":[0,0,0,0,128,"color","255,255,255"]},{"id":52,"type":"VHS_BatchManager","pos":[292.2566833496094,5661.09619140625],"size":[255.0703125,58],"flags":{},"order":38,"mode":0,"inputs":[{"label":"frames_per_batch","localized_name":"frames_per_batch","name":"frames_per_batch","type":"INT","widget":{"name":"frames_per_batch"},"link":69}],"outputs":[{"label":"meta_batch","localized_name":"meta_batch","name":"meta_batch","type":"VHS_BatchManager","slot_index":0,"links":[72]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_BatchManager"},"widgets_values":{"frames_per_batch":20,"count":75}},{"id":95,"type":"ImageFromBatch","pos":[1262.0067138671875,5822.13623046875],"size":[270,82],"flags":{},"order":63,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":119},{"localized_name":"batch_index","name":"batch_index","type":"INT","widget":{"name":"batch_index"},"link":null},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[120]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"ImageFromBatch"},"widgets_values":[0,1]},{"id":26,"type":"SetNode","pos":[2571.729736328125,5847.54052734375],"size":[210,58],"flags":{"collapsed":false},"order":74,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":36}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[18,29]}],"title":"Set_control_video","properties":{"previousName":""},"widgets_values":["control_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":101,"type":"VHS_VideoCombine","pos":[-1255.4019775390625,5345.94287109375],"size":[220.5830078125,714.582763671875],"flags":{},"order":49,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":138},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":134},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":129},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":[131]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":8,"loop_count":0,"filename_prefix":"tempProcess","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"tempProcess_00093-audio.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":10,"workflow":"tempProcess_00093.png","fullpath":"D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\output\\tempProcess_00093-audio.mp4"}}}},{"id":102,"type":"VHS_VideoInfo","pos":[-1561.9381103515625,5447.12548828125],"size":[225.59765625,206],"flags":{},"order":37,"mode":4,"inputs":[{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","link":128}],"outputs":[{"localized_name":"source_fpsüü®","name":"source_fpsüü®","type":"FLOAT","links":null},{"localized_name":"source_frame_countüü®","name":"source_frame_countüü®","type":"INT","links":null},{"localized_name":"source_durationüü®","name":"source_durationüü®","type":"FLOAT","links":null},{"localized_name":"source_widthüü®","name":"source_widthüü®","type":"INT","links":null},{"localized_name":"source_heightüü®","name":"source_heightüü®","type":"INT","links":null},{"localized_name":"loaded_fpsüü¶","name":"loaded_fpsüü¶","type":"FLOAT","links":[129]},{"localized_name":"loaded_frame_countüü¶","name":"loaded_frame_countüü¶","type":"INT","links":null},{"localized_name":"loaded_durationüü¶","name":"loaded_durationüü¶","type":"FLOAT","links":null},{"localized_name":"loaded_widthüü¶","name":"loaded_widthüü¶","type":"INT","links":null},{"localized_name":"loaded_heightüü¶","name":"loaded_heightüü¶","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_VideoInfo"},"widgets_values":{}},{"id":104,"type":"VHS_SelectFilename","pos":[-901.518310546875,5346.66552734375],"size":[225.4912109375,58],"flags":{},"order":52,"mode":4,"inputs":[{"localized_name":"filenames","name":"filenames","type":"VHS_FILENAMES","link":131},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null}],"outputs":[{"localized_name":"Filename","name":"Filename","type":"STRING","links":[139,140,141]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_SelectFilename"},"widgets_values":{"index":-1}},{"id":107,"type":"easy showAnything","pos":[-894.0234375,5501.94140625],"size":[210,88],"flags":{},"order":57,"mode":4,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":139}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\output\\tempProcess_00093-audio.mp4"]},{"id":108,"type":"easy showAnything","pos":[-894.0234375,5501.94140625],"size":[210,88],"flags":{},"order":58,"mode":4,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":140}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\output\\tempProcess_00093-audio.mp4"]},{"id":37,"type":"DepthAnything_V2","pos":[2206.681884765625,5369.2646484375],"size":[214.20001220703125,46],"flags":{},"order":65,"mode":0,"inputs":[{"localized_name":"da_model","name":"da_model","type":"DAMODEL","link":51},{"localized_name":"images","name":"images","type":"IMAGE","link":52}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[46]}],"properties":{"cnr_id":"comfyui-depthanythingv2","ver":"003d7b44bafd3a8a4c3693a9ca3ddcd72f4883ab","Node name for S&R":"DepthAnything_V2"},"widgets_values":[]},{"id":38,"type":"DWPreprocessor","pos":[2160.36962890625,5471.68017578125],"size":[292.9357604980469,222],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":53},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[54]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"83463c2e4b04e729268e57f638b4212e0da4badc","Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":39,"type":"ImageResizeKJv2","pos":[2177.9306640625,5762.2490234375],"size":[270,242],"flags":{},"order":69,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":54},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[47]},{"localized_name":"width","name":"width","type":"INT","links":[]},{"localized_name":"height","name":"height","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[848,848,"lanczos","resize","172,172,172","center",16]},{"id":51,"type":"SimpleMath+","pos":[235.22230529785156,5249.0029296875],"size":[315,98],"flags":{},"order":45,"mode":0,"inputs":[{"label":"a","localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT","link":67},{"label":"b","localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT","link":68},{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null},{"label":"c","name":"c","shape":7,"type":"*","link":null}],"outputs":[{"label":"INT","localized_name":"INT","name":"INT","type":"INT","slot_index":0,"links":[106,108]},{"label":"FLOAT","localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"SimpleMath+"},"widgets_values":["a/b"]},{"id":98,"type":"VHS_LoadVideo","pos":[-1891.0552978515625,5337.10302734375],"size":[253.279296875,750.3380126953125],"flags":{},"order":24,"mode":4,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[142]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":[134]},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[128]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"AnimateDiff_00105-audio.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00105-audio.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1}}}},{"id":88,"type":"easy showAnything","pos":[-207.45550537109375,5289.80908203125],"size":[210,88],"flags":{},"order":46,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":107}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["81"]},{"id":48,"type":"VHS_LoadVideoPath","pos":[-201.934814453125,5496.86865234375],"size":[237.7138671875,286],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"STRING","widget":{"name":"video"},"link":65},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[111]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":[67,107]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":[80]},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[81]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.5.18","Node name for S&R":"VHS_LoadVideoPath"},"widgets_values":{"video":"","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","videopreview":{"hidden":false,"paused":false,"params":{"filename":"","type":"path","format":"video/","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":81,"skip_first_frames":0,"select_every_nth":1}}}},{"id":49,"type":"easy int","pos":[-229.41578674316406,5853.63037109375],"size":[270,58],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"int","name":"int","type":"INT","links":[68,69,71]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy int"},"widgets_values":[41]},{"id":94,"type":"SetNode","pos":[-180.7971649169922,5976.16796875],"size":[210,60],"flags":{},"order":44,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":111}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_initVideo","properties":{"previousName":"initVideo"},"widgets_values":["initVideo"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":106,"type":"ImageListToImageBatch","pos":[-1076.80029296875,5035.88037109375],"size":[202.54061889648438,41.96492004394531],"flags":{},"order":43,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":143}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[138]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.8.1","Node name for S&R":"ImageListToImageBatch"},"widgets_values":[]},{"id":110,"type":"RMBG","pos":[-1586.48046875,4909.82275390625],"size":[320,302],"flags":{},"order":36,"mode":0,"inputs":[{"localized_name":"Image","name":"image","type":"IMAGE","link":142},{"localized_name":"Model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"Sensitivity","name":"sensitivity","shape":7,"type":"FLOAT","widget":{"name":"sensitivity"},"link":null},{"localized_name":"Processing Resolution","name":"process_res","shape":7,"type":"INT","widget":{"name":"process_res"},"link":null},{"localized_name":"Mask Blur","name":"mask_blur","shape":7,"type":"INT","widget":{"name":"mask_blur"},"link":null},{"localized_name":"Mask Offset","name":"mask_offset","shape":7,"type":"INT","widget":{"name":"mask_offset"},"link":null},{"localized_name":"Invert Output","name":"invert_output","shape":7,"type":"BOOLEAN","widget":{"name":"invert_output"},"link":null},{"localized_name":"Refine Foreground","name":"refine_foreground","shape":7,"type":"BOOLEAN","widget":{"name":"refine_foreground"},"link":null},{"localized_name":"Background","name":"background","shape":7,"type":"COMBO","widget":{"name":"background"},"link":null},{"localized_name":"Background Color","name":"background_color","shape":7,"type":"COLOR","widget":{"name":"background_color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[143]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null},{"localized_name":"MASK IMAGE","name":"MASK_IMAGE","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-rmbg","ver":"daf0b01deb1c529dfb543093bba2ed586aad7886","Node name for S&R":"RMBG"},"widgets_values":["RMBG-2.0",1,1024,0,0,false,false,"Color","#808080"],"color":"#222e40","bgcolor":"#364254"},{"id":109,"type":"easy showAnything","pos":[-894.0234375,5501.94140625],"size":[210,403.2612609863281],"flags":{},"order":59,"mode":4,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":141}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"b1a875b151f3fd76542cdcb9269961ad330dd5ef","Node name for S&R":"easy showAnything"},"widgets_values":["D:\\tools\\ComfyUI_windows_portable\\ComfyUI\\output\\tempProcess_00093-audio.mp4"],"color":"#332922","bgcolor":"#593930"},{"id":22,"type":"WanVideoVACEStartToEndFrame","pos":[2355.5791015625,6452.7109375],"size":[403.1999816894531,142],"flags":{"collapsed":false},"order":76,"mode":0,"inputs":[{"localized_name":"start_image","name":"start_image","shape":7,"type":"IMAGE","link":28},{"localized_name":"end_image","name":"end_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"control_images","name":"control_images","shape":7,"type":"IMAGE","link":29},{"localized_name":"inpaint_mask","name":"inpaint_mask","shape":7,"type":"MASK","link":null},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":78},{"localized_name":"empty_frame_level","name":"empty_frame_level","type":"FLOAT","widget":{"name":"empty_frame_level"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[40,144]},{"localized_name":"masks","name":"masks","type":"MASK","links":[13,45]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"ce8d908ed64df328e5bcb692eddc4fa53ad82c49","Node name for S&R":"WanVideoVACEStartToEndFrame"},"widgets_values":[33,0.5000000000000001]},{"id":34,"type":"Seed (rgthree)","pos":[3986.552978515625,6713.6201171875],"size":[315,130],"flags":{},"order":26,"mode":0,"inputs":[],"outputs":[{"dir":4,"name":"SEED","shape":3,"type":"INT","links":[27]}],"properties":{"cnr_id":"rgthree-comfy","ver":"b84f39c7c224de765de0b54c55b967329011819d"},"widgets_values":[534058504161044,"","",""]},{"id":47,"type":"DF_Text","pos":[-532.738525390625,5589.791015625],"size":[270,58],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"Text","name":"Text","type":"STRING","widget":{"name":"Text"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[65,73]}],"properties":{"cnr_id":"derfuu_comfyui_moddednodes","ver":"1.0.1","Node name for S&R":"DF_Text"},"widgets_values":["D:\\work\\comfyui\\‰ΩúÂìÅ\\‰ΩúÂìÅ61\\WanVideoWrapper_VACE_controlVideo_00069-audio.mp4"]},{"id":40,"type":"LoadImage","pos":[1259.96533203125,6748.70361328125],"size":[292.45867919921875,396.9063415527344],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[123]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Load Image: Reference","properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["2025-05-25-194341_788957261747989.png","image"]}],"links":[[1,19,2,5,1,"INT"],[3,5,0,6,1,"IMAGE"],[4,7,0,6,5,"IMAGE"],[5,10,0,7,0,"IMAGE"],[6,13,0,7,1,"IMAGE"],[7,9,0,10,0,"IMAGE"],[9,12,0,13,0,"IMAGE"],[10,1,0,14,0,"WANVAE"],[11,11,0,14,1,"IMAGE"],[12,15,0,14,2,"IMAGE"],[13,22,1,14,3,"MASK"],[14,11,1,14,5,"INT"],[15,11,2,14,6,"INT"],[16,11,3,14,7,"INT"],[17,24,0,15,0,"*"],[18,26,0,16,0,"IMAGE"],[19,8,0,18,0,"WANVAE"],[20,21,0,18,1,"LATENT"],[21,18,0,19,0,"IMAGE"],[23,25,5,20,4,"FLOAT"],[24,4,0,21,0,"WANVIDEOMODEL"],[25,35,0,21,1,"WANVIDEOTEXTEMBEDS"],[26,14,0,21,2,"WANVIDIMAGE_EMBEDS"],[27,34,0,21,17,"INT"],[28,27,0,22,0,"IMAGE"],[29,26,0,22,2,"IMAGE"],[31,24,0,23,0,"IMAGE"],[32,30,0,24,0,"IMAGE"],[33,36,3,24,1,"INT"],[34,36,4,24,2,"INT"],[36,33,0,26,0,"*"],[38,36,3,27,1,"INT"],[39,36,4,27,2,"INT"],[40,22,0,28,0,"IMAGE"],[44,25,5,31,4,"FLOAT"],[45,22,1,32,0,"MASK"],[46,37,0,33,0,"IMAGE"],[47,39,0,33,1,"IMAGE"],[48,2,0,35,0,"WANTEXTENCODER"],[49,3,0,35,1,"WANVIDEOMODEL"],[51,29,0,37,0,"DAMODEL"],[52,36,0,37,1,"IMAGE"],[53,36,0,38,0,"IMAGE"],[54,38,0,39,0,"IMAGE"],[65,47,0,48,2,"STRING"],[67,48,1,51,0,"INT,FLOAT"],[68,49,0,51,1,"INT,FLOAT"],[69,49,0,52,0,"INT"],[70,50,1,53,0,"INT,FLOAT"],[71,49,0,53,1,"INT,FLOAT"],[72,52,0,54,0,"VHS_BatchManager"],[73,47,0,54,2,"STRING"],[74,53,0,54,7,"INT"],[75,54,0,36,0,"IMAGE"],[78,54,1,22,4,"INT"],[80,48,2,57,0,"*"],[81,48,3,59,0,"*"],[85,62,0,25,0,"VHS_VIDEOINFO"],[87,63,0,64,1,"*"],[88,64,0,31,0,"IMAGE"],[89,50,2,65,0,"*"],[91,65,0,63,0,"*"],[93,19,0,63,1,"*"],[94,50,0,66,0,"*"],[96,66,0,64,0,"FLOW_CONTROL"],[97,75,0,68,0,"*"],[98,80,0,69,0,"*"],[99,76,0,74,0,"*"],[100,84,0,80,1,"BLOCKSWAPARGS"],[101,81,0,80,2,"WANVIDLORA"],[102,78,0,80,4,"VACEPATH"],[103,85,0,31,1,"AUDIO"],[104,85,0,20,1,"AUDIO"],[105,54,1,86,0,"*"],[106,51,0,50,2,"INT"],[107,48,1,88,0,"*"],[108,51,0,89,0,"*"],[109,53,0,92,0,"*"],[110,50,1,93,0,"*"],[111,48,0,94,0,"*"],[112,64,0,6,0,"IMAGE"],[115,6,0,20,0,"IMAGE"],[119,54,0,95,0,"IMAGE"],[120,95,0,96,0,"IMAGE"],[122,96,0,27,0,"IMAGE"],[123,40,0,30,0,"IMAGE"],[128,98,3,102,0,"VHS_VIDEOINFO"],[129,102,5,101,4,"FLOAT"],[131,101,0,104,0,"VHS_FILENAMES"],[134,98,2,101,1,"AUDIO"],[138,106,0,101,0,"IMAGE"],[139,104,0,107,0,"*"],[140,104,0,108,0,"*"],[141,104,0,109,0,"*"],[142,98,0,110,0,"IMAGE"],[143,110,0,106,0,"IMAGE"],[144,22,0,11,0,"IMAGE"]],"groups":[{"id":2,"title":"Group","bounding":[1230.355224609375,5206.744140625,3502.930908203125,2029.9158935546875],"color":"#3f789e","font_size":24,"flags":{}},{"id":1,"title":"Control with Reference","bounding":[1634.042724609375,5276.2939453125,3089.243408203125,1950.3660888671875],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Group","bounding":[1240.355224609375,5250.34423828125,340,1957.768798828125],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"for_start","bounding":[-466.2845458984375,5182.78564453125,1477.962158203125,898.3787841796875],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"for_end","bounding":[4965.39794921875,5199.677734375,959.05126953125,1220.8006591796875],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Models","bounding":[1308.6619873046875,3370.308837890625,1397.8963623046875,1329.1912841796875],"color":"#88A","font_size":24,"flags":{}},{"id":8,"title":"Group","bounding":[6085.56396484375,5187.0732421875,1286.263671875,1114.6199951171875],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"ËßÜÈ¢ëÈ¢ÑÂ§ÑÁêÜ","bounding":[-1901.055419921875,5263.5029296875,1235.02880859375,822.0960693359375],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.9849732675807703,"offset":[-479.15381365942636,-6503.753088375259]}},"version":0.4}