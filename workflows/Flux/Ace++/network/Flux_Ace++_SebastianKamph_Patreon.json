{"last_node_id":273,"last_link_id":418,"nodes":[{"id":255,"type":"SaveImage","pos":[617.9688720703125,138.2545928955078],"size":[709.9743041992188,483.73919677734375],"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":371,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["Ace/Stitched/Stitched"],"color":"#223","bgcolor":"#335"},{"id":146,"type":"VAELoader","pos":[-1102.0169677734375,584.8160400390625],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"VAE","type":"VAE","links":[222,415],"slot_index":0,"label":"VAE"}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"],"color":"#322","bgcolor":"#533"},{"id":155,"type":"DifferentialDiffusion","pos":[-1097.6829833984375,709.0126342773438],"size":[242.62339782714844,26],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":408,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[387],"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"DifferentialDiffusion"},"widgets_values":[]},{"id":147,"type":"CLIPTextEncode","pos":[-41.93974685668945,107.3916015625],"size":[332.5511169433594,172.9056854248047],"flags":{},"order":14,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":410,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[257],"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["Maintain the face and hat. Man in a red shirt is having a coffee in a coffeeshop."],"color":"#232","bgcolor":"#353"},{"id":152,"type":"FluxGuidance","pos":[304.54840087890625,111.29292297363281],"size":[237.43191528320312,59.78689193725586],"flags":{},"order":16,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":257,"label":"conditioning"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[268],"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"FluxGuidance"},"widgets_values":[50],"color":"#8f662d","bgcolor":"#7b5219"},{"id":148,"type":"CLIPTextEncode","pos":[-41.95195388793945,316.93890380859375],"size":[331.0518798828125,128.09695434570312],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":213,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[218],"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":150,"type":"InpaintModelConditioning","pos":[-40.021759033203125,491.858642578125],"size":[325.711669921875,138],"flags":{},"order":18,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":268,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":218,"label":"negative"},{"name":"vae","type":"VAE","link":222,"label":"vae"},{"name":"pixels","type":"IMAGE","link":403,"label":"pixels"},{"name":"mask","type":"MASK","link":402,"label":"mask"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[219],"slot_index":0,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[220],"slot_index":1,"label":"negative"},{"name":"latent","type":"LATENT","links":[221],"slot_index":2,"label":"latent"}],"properties":{"Node name for S&R":"InpaintModelConditioning"},"widgets_values":[false]},{"id":268,"type":"Label (rgthree)","pos":[-514.671630859375,-127.46461486816406],"size":[261.3037109375,50],"flags":{"allow_interaction":true},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Load image","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":269,"type":"Label (rgthree)","pos":[-20.420475006103516,-124.84306335449219],"size":[285.25390625,50],"flags":{"allow_interaction":true},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Write prompt","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":271,"type":"Label (rgthree)","pos":[818.6165771484375,-126.15354919433594],"size":[208.4716796875,50],"flags":{"allow_interaction":true},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"Generate","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":258,"type":"Note","pos":[-1610.30859375,106.92919921875],"size":[444.3421936035156,183.622314453125],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Download comfyui_portrait_lora64.safetensors and place in /models/loras/\nhttps://huggingface.co/ali-vilab/ACE_Plus/tree/main/portrait\n\nDownload Flux Fill fp8 and place in /models/diffusion_models/\nhttps://civitai.com/models/969431/flux-fill-fp8\n\nOR Flux Fill fp16 and place in /models/diffusion_models/\nhttps://huggingface.co/black-forest-labs/FLUX.1-Fill-dev\nThis version is more demanding for your hardware\n\nclip_l, t5xxl_fp16 (or t5xxl_fp8) can be downloaded from the model manager"],"color":"#432","bgcolor":"#653"},{"id":149,"type":"KSampler","pos":[300.7037353515625,212.27345275878906],"size":[246.20628356933594,474.0000305175781],"flags":{},"order":19,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":387,"label":"model"},{"name":"positive","type":"CONDITIONING","link":219,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":220,"label":"negative"},{"name":"latent_image","type":"LATENT","link":221,"label":"latent_image"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[202],"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[510170438871890,"randomize",20,1,"euler","normal",1],"color":"#232","bgcolor":"#353"},{"id":272,"type":"Label (rgthree)","pos":[308.40142822265625,1314.59619140625],"size":[1061.6943359375,50],"flags":{"allow_interaction":true},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Downloaded from patreon.com/sebastiankamph","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":145,"type":"DualCLIPLoader","pos":[-1102.0169677734375,230.77178955078125],"size":[315,106],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","links":[213,409],"slot_index":0,"label":"CLIP"}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["flux\\ViT-L-14-TEXT-detail-improved-hiT-GmP-TE-only-HF.safetensors","t5xxl_fp8_e4m3fn_scaled.safetensors","flux","default"],"color":"#6b5c14","bgcolor":"#574800"},{"id":144,"type":"UNETLoader","pos":[-1102.0169677734375,105.53903198242188],"size":[315,82],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[407],"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["flux1-fill-dev.safetensors","default"],"color":"#453f4f","bgcolor":"#312b3b"},{"id":265,"type":"Power Lora Loader (rgthree)","pos":[-1102.0169677734375,377.1969909667969],"size":[340.20001220703125,166],"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":407,"dir":3,"label":"model"},{"name":"clip","type":"CLIP","link":409,"dir":3,"label":"clip"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[408],"slot_index":0,"shape":3,"dir":4,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[410],"slot_index":1,"shape":3,"dir":4,"label":"CLIP"}],"properties":{"Show Strengths":"Single Strength"},"widgets_values":[null,{"type":"PowerLoraLoaderHeaderWidget"},{"on":true,"lora":"flux\\ace_plus\\comfyui_portrait_lora64.safetensors","strength":1,"strengthTwo":null},null,""],"color":"#323","bgcolor":"#535"},{"id":153,"type":"VAEDecode","pos":[284.1145324707031,771.1810913085938],"size":[234.62432861328125,57.2703742980957],"flags":{},"order":20,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":202,"label":"samples"},{"name":"vae","type":"VAE","link":415,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[203,371],"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":242,"type":"ImageResize+","pos":[-641.41064453125,651.0125122070312],"size":[210,218],"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":386,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[348],"slot_index":0,"label":"IMAGE"},{"name":"width","type":"INT","links":[349,391,406],"slot_index":1,"label":"width"},{"name":"height","type":"INT","links":[350],"slot_index":2,"label":"height"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[1024,1024,"nearest","fill / crop","always",0]},{"id":273,"type":"ImageAndMaskPreview","pos":[-647.9805297851562,932.933349609375],"size":[544.838134765625,338],"flags":{},"order":17,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":418,"shape":7,"label":"image"},{"name":"mask","type":"MASK","link":416,"shape":7,"label":"mask"}],"outputs":[{"name":"composite","type":"IMAGE","links":null,"shape":3,"label":"composite"}],"properties":{"Node name for S&R":"ImageAndMaskPreview"},"widgets_values":[0.5,"255, 0, 255",false]},{"id":165,"type":"ImagePadForOutpaint","pos":[-338.1365051269531,657.3667602539062],"size":[210,156.6644744873047],"flags":{},"order":15,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":348,"label":"image"},{"name":"right","type":"INT","link":406,"widget":{"name":"right"},"label":"right"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[403,418],"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":[402,416],"slot_index":1,"label":"MASK"}],"properties":{"Node name for S&R":"ImagePadForOutpaint"},"widgets_values":[0,0,768,0,0]},{"id":259,"type":"LoadImage","pos":[-648.0858154296875,72.87748718261719],"size":[461.2685241699219,491.6891784667969],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[386],"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["pasted/image (5).png","image"],"color":"#432","bgcolor":"#653"},{"id":270,"type":"Label (rgthree)","pos":[-1046.94189453125,-130.08673095703125],"size":[305.6884765625,50],"flags":{"allow_interaction":true},"order":9,"mode":0,"inputs":[],"outputs":[],"title":"Install models","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":243,"type":"SaveImage","pos":[620.8574829101562,681.6099853515625],"size":[698.2672729492188,492.0143737792969],"flags":{},"order":23,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":353,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["Ace/Image"],"color":"#223","bgcolor":"#335"},{"id":168,"type":"ImageCrop","pos":[275.86865234375,928.4954833984375],"size":[225.7595672607422,119.9699478149414],"flags":{},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":203,"label":"image"},{"name":"width","type":"INT","link":349,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":350,"widget":{"name":"height"},"label":"height"},{"name":"x","type":"INT","link":391,"widget":{"name":"x"},"label":"x"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[353],"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCrop"},"widgets_values":[778,512,0,0]}],"links":[[202,149,0,153,0,"LATENT"],[203,153,0,168,0,"IMAGE"],[213,145,0,148,0,"CLIP"],[218,148,0,150,1,"CONDITIONING"],[219,150,0,149,1,"CONDITIONING"],[220,150,1,149,2,"CONDITIONING"],[221,150,2,149,3,"LATENT"],[222,146,0,150,2,"VAE"],[257,147,0,152,0,"CONDITIONING"],[268,152,0,150,0,"CONDITIONING"],[348,242,0,165,0,"IMAGE"],[349,242,1,168,1,"INT"],[350,242,2,168,2,"INT"],[353,168,0,243,0,"IMAGE"],[371,153,0,255,0,"IMAGE"],[386,259,0,242,0,"IMAGE"],[387,155,0,149,0,"MODEL"],[391,242,1,168,3,"INT"],[402,165,1,150,4,"MASK"],[403,165,0,150,3,"IMAGE"],[406,242,1,165,1,"INT"],[407,144,0,265,0,"MODEL"],[408,265,0,155,0,"MODEL"],[409,145,0,265,1,"CLIP"],[410,265,1,147,0,"CLIP"],[415,146,0,153,1,"VAE"],[416,165,1,273,1,"MASK"],[418,165,0,273,0,"IMAGE"]],"groups":[{"id":11,"title":"Group","bounding":[-1147.22998046875,-39.552791595458984,2528.009765625,1325.8865966796875],"color":"#3f789e","font_size":24,"flags":{}},{"id":12,"title":"Save Images","bounding":[577.5249633789062,30.48819351196289,760.4636840820312,1231.1295166015625],"color":"#3f789e","font_size":24,"flags":{}},{"id":13,"title":"Model Loaders","bounding":[-1119.85498046875,21.065052032470703,403.3916931152344,736.6915283203125],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Image Loading & Processing","bounding":[-678.91748046875,26.048748016357422,578.5724487304688,1237.6953125],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"Generation","bounding":[-60.411582946777344,29.418357849121094,628.1585693359375,1231.9825439453125],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.49500000000000943,"offset":[2091.9002363511336,599.9591489130887]},"ue_links":[],"groupNodes":{},"node_versions":{"comfy-core":"0.3.12","rgthree-comfy":"5d771b8b56a343c24a26e8cea1f0c87c3d58102f"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0},"version":0.4}